<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpawnKit Kanban Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .test-header h1 {
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .test-header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: 400;
        }
        
        .theme-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .theme-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
            color: #333;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .theme-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        
        .theme-button.active {
            background: #4f46e5;
            color: white;
        }
        
        .test-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .control-button {
            padding: 10px 20px;
            border: 2px solid white;
            border-radius: 6px;
            background: transparent;
            color: white;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .control-button:hover {
            background: white;
            color: #333;
        }
        
        .demo-grid {
            display: grid;
            gap: 40px;
            grid-template-columns: 1fr;
        }
        
        @media (min-width: 1200px) {
            .demo-grid.side-by-side {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .demo-section {
            background: rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .demo-title {
            color: white;
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .kanban-container {
            min-height: 700px;
        }
        
        .stats {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }
        
        .stats-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #22c55e;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: rgba(255,255,255,0.7);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üöÄ SpawnKit Kanban</h1>
            <p>Drag-and-drop task management for AI agent fleets</p>
        </div>
        
        <div class="theme-selector">
            <button class="theme-button active" data-theme="dark">üåô Dark Mode</button>
            <button class="theme-button" data-theme="light">‚òÄÔ∏è Light Mode</button>
            <button class="theme-button" data-theme="both">üåó Side by Side</button>
        </div>
        
        <div class="test-controls">
            <button class="control-button" id="refresh-data">üîÑ Refresh Data</button>
            <button class="control-button" id="add-urgent">‚ûï Add Urgent Task</button>
            <button class="control-button" id="add-normal">‚ûï Add Normal Task</button>
            <button class="control-button" id="clear-done">üóëÔ∏è Clear Done</button>
            <button class="control-button" id="simulate-progress">‚ö° Simulate Progress</button>
        </div>
        
        <div class="demo-grid" id="demo-grid">
            <div class="demo-section">
                <h2 class="demo-title">Interactive Kanban Board</h2>
                <div class="kanban-container" id="kanban-container"></div>
                <div class="stats" id="stats">
                    <div class="stats-item">
                        <span>Total Tasks:</span>
                        <span id="total-tasks">0</span>
                    </div>
                    <div class="stats-item">
                        <span>In Progress:</span>
                        <span id="progress-tasks">0</span>
                    </div>
                    <div class="stats-item">
                        <span>Completed:</span>
                        <span id="done-tasks">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Built with ‚ù§Ô∏è for the AI agent ecosystem</p>
        </footer>
    </div>
    
    <div class="toast" id="toast"></div>
    
    <script src="../src/components/kanban.js"></script>
    <script>
        let kanbanInstance;
        let kanbanInstanceLight;
        let currentView = 'dark';
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeKanban();
            setupEventListeners();
        });
        
        function initializeKanban() {
            const container = document.getElementById('kanban-container');
            
            kanbanInstance = new SpawnKitKanban(container, {
                theme: 'dark',
                onCardClick: handleCardClick,
                onCardMove: handleCardMove
            });
            
            updateStats();
        }
        
        function initializeLightKanban() {
            const lightContainer = document.getElementById('kanban-container-light');
            if (!lightContainer) return;
            
            kanbanInstanceLight = new SpawnKitKanban(lightContainer, {
                theme: 'light',
                onCardClick: handleCardClick,
                onCardMove: handleCardMove
            });
        }
        
        function setupEventListeners() {
            // Theme switching
            document.querySelectorAll('.theme-button').forEach(btn => {
                btn.addEventListener('click', function() {
                    const theme = this.dataset.theme;
                    switchTheme(theme);
                    
                    // Update active state
                    document.querySelectorAll('.theme-button').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Control buttons
            document.getElementById('refresh-data').addEventListener('click', refreshData);
            document.getElementById('add-urgent').addEventListener('click', () => addRandomTask('critical'));
            document.getElementById('add-normal').addEventListener('click', () => addRandomTask('normal'));
            document.getElementById('clear-done').addEventListener('click', clearDone);
            document.getElementById('simulate-progress').addEventListener('click', simulateProgress);
        }
        
        function switchTheme(theme) {
            const grid = document.getElementById('demo-grid');
            const container = document.getElementById('kanban-container');
            
            if (theme === 'both') {
                // Side by side view
                grid.classList.add('side-by-side');
                grid.innerHTML = `
                    <div class="demo-section">
                        <h2 class="demo-title">üåô Dark Theme</h2>
                        <div class="kanban-container" id="kanban-container-dark"></div>
                    </div>
                    <div class="demo-section">
                        <h2 class="demo-title">‚òÄÔ∏è Light Theme</h2>
                        <div class="kanban-container" id="kanban-container-light"></div>
                    </div>
                `;
                
                // Initialize both instances
                const darkContainer = document.getElementById('kanban-container-dark');
                const lightContainer = document.getElementById('kanban-container-light');
                
                kanbanInstance = new SpawnKitKanban(darkContainer, {
                    theme: 'dark',
                    onCardClick: handleCardClick,
                    onCardMove: handleCardMove
                });
                
                kanbanInstanceLight = new SpawnKitKanban(lightContainer, {
                    theme: 'light',
                    onCardClick: handleCardClick,
                    onCardMove: handleCardMove
                });
                
                currentView = 'both';
            } else {
                // Single view
                grid.classList.remove('side-by-side');
                grid.innerHTML = `
                    <div class="demo-section">
                        <h2 class="demo-title">Interactive Kanban Board</h2>
                        <div class="kanban-container" id="kanban-container"></div>
                        <div class="stats" id="stats">
                            <div class="stats-item">
                                <span>Total Tasks:</span>
                                <span id="total-tasks">0</span>
                            </div>
                            <div class="stats-item">
                                <span>In Progress:</span>
                                <span id="progress-tasks">0</span>
                            </div>
                            <div class="stats-item">
                                <span>Completed:</span>
                                <span id="done-tasks">0</span>
                            </div>
                        </div>
                    </div>
                `;
                
                const newContainer = document.getElementById('kanban-container');
                kanbanInstance = new SpawnKitKanban(newContainer, {
                    theme: theme,
                    onCardClick: handleCardClick,
                    onCardMove: handleCardMove
                });
                
                kanbanInstanceLight = null;
                currentView = theme;
                updateStats();
            }
        }
        
        function handleCardClick(card) {
            showToast(`Clicked on task: ${card.title}`);
        }
        
        function handleCardMove(card, fromCol, toCol) {
            showToast(`Moved "${card.title}" from ${fromCol} to ${toCol}`);
            updateStats();
        }
        
        function refreshData() {
            kanbanInstance.refresh();
            if (kanbanInstanceLight) kanbanInstanceLight.refresh();
            showToast('Data refreshed!');
            updateStats();
        }
        
        function addRandomTask(priority = 'normal') {
            const tasks = [
                'Optimize neural network parameters',
                'Generate quarterly financial report', 
                'Analyze user behavior patterns',
                'Update system documentation',
                'Process incoming support tickets',
                'Create marketing campaign content',
                'Backup production databases',
                'Review code quality metrics',
                'Plan upcoming feature releases',
                'Monitor system performance',
                'Research competitive landscape',
                'Design user interface mockups'
            ];
            
            const agents = ['Claude', 'Opus', 'Sonnet', 'Haiku', 'GPT-4', 'Gemini'];
            const colors = ['#ef4444', '#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#ec4899'];
            
            const agent = agents[Math.floor(Math.random() * agents.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const task = tasks[Math.floor(Math.random() * tasks.length)];
            
            const newCard = {
                title: task,
                agent: agent,
                avatar: {
                    initials: agent.substring(0, 2).toUpperCase(),
                    color: color
                },
                priority: priority,
                timeEstimate: `${Math.floor(Math.random() * 3) + 1}h ${Math.floor(Math.random() * 60)}m`
            };
            
            kanbanInstance.addCard('todo', newCard);
            if (kanbanInstanceLight) kanbanInstanceLight.addCard('todo', newCard);
            
            showToast(`Added new ${priority} task!`);
            updateStats();
        }
        
        function clearDone() {
            const doneCards = kanbanInstance.columns.find(col => col.id === 'done').cards;
            const count = doneCards.length;
            
            doneCards.forEach(card => {
                kanbanInstance.removeCard(card.id);
                if (kanbanInstanceLight) kanbanInstanceLight.removeCard(card.id);
            });
            
            if (count > 0) {
                showToast(`Cleared ${count} completed task${count > 1 ? 's' : ''}!`);
                updateStats();
            } else {
                showToast('No completed tasks to clear.');
            }
        }
        
        function simulateProgress() {
            const todoCards = kanbanInstance.columns.find(col => col.id === 'todo').cards;
            const inProgressCards = kanbanInstance.columns.find(col => col.id === 'inprogress').cards;
            
            // Move a random todo to in progress
            if (todoCards.length > 0) {
                const randomTodo = todoCards[Math.floor(Math.random() * todoCards.length)];
                kanbanInstance.moveCard(randomTodo.id, 'todo', 'inprogress');
                if (kanbanInstanceLight) kanbanInstanceLight.moveCard(randomTodo.id, 'todo', 'inprogress');
                showToast(`Started working on: ${randomTodo.title}`);
            }
            
            // Move a random in-progress to done
            if (inProgressCards.length > 0) {
                setTimeout(() => {
                    const randomInProgress = inProgressCards[Math.floor(Math.random() * inProgressCards.length)];
                    kanbanInstance.moveCard(randomInProgress.id, 'inprogress', 'done');
                    if (kanbanInstanceLight) kanbanInstanceLight.moveCard(randomInProgress.id, 'inprogress', 'done');
                    showToast(`Completed: ${randomInProgress.title}`);
                    updateStats();
                }, 500);
            }
            
            updateStats();
        }
        
        function updateStats() {
            if (currentView === 'both') return;
            
            const totalTasks = kanbanInstance.columns.reduce((sum, col) => sum + col.cards.length, 0);
            const progressTasks = kanbanInstance.columns.find(col => col.id === 'inprogress').cards.length;
            const doneTasks = kanbanInstance.columns.find(col => col.id === 'done').cards.length;
            
            document.getElementById('total-tasks').textContent = totalTasks;
            document.getElementById('progress-tasks').textContent = progressTasks;
            document.getElementById('done-tasks').textContent = doneTasks;
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Add some keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'r':
                        e.preventDefault();
                        refreshData();
                        break;
                    case '1':
                        e.preventDefault();
                        addRandomTask('normal');
                        break;
                    case '2':
                        e.preventDefault();
                        addRandomTask('critical');
                        break;
                }
            }
        });
    </script>
</body>
</html>