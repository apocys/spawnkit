<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SpawnKit â€” Modern Office</title>
<script>window.OC_RELAY_URL = window.OC_RELAY_URL || 'http://127.0.0.1:18790';</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ============================================================
   iOS Brand Design System â€” Modern Office Theme
   VideoCast Purple (#8b5cf6) accent with Apple design language
   ============================================================ */

:root {
  /* --- iOS Typography --- */
  --font-display: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;

  /* --- iOS Color System (Dark Mode) --- */
  --color-bg-primary: #000000;
  --color-bg-secondary: #1c1c1e;
  --color-bg-tertiary: #2c2c2e;
  --color-surface: #1c1c1e;
  --color-text-primary: #f5f5f7;
  --color-text-secondary: #86868b;
  --color-text-tertiary: #636366;
  --color-border: #38383a;
  --color-border-light: #2c2c2e;
  --color-nav-bg: rgba(29, 29, 31, 0.72);
  --color-nav-border: rgba(255, 255, 255, 0.08);

  /* --- VideoCast Brand Colors (Purple Theme) --- */
  --color-accent: #8b5cf6;
  --color-accent-hover: #9366ff;
  --color-accent-active: #7c4ddb;
  --color-accent-light: rgba(139, 92, 246, 0.1);

  /* --- Semantic Colors --- */
  --color-success: #30d158;
  --color-error: #ff453a;
  --color-warning: #ffd60a;
  --color-info: #64d2ff;

  /* --- Spacing --- */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;

  /* --- Border Radius --- */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-pill: 980px;

  /* --- iOS Animations --- */
  --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-apple: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.25, 1, 0.5, 1);
  --duration-fast: 150ms;
  --duration-normal: 300ms;

  /* --- Shadows (Dark Mode) --- */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.4);

  /* --- Layout --- */
  --panel-width: 400px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Reset & Base
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: var(--color-bg-primary);
  overflow: hidden;
  font-family: var(--font-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

canvas {
  display: block;
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  cursor: default;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Loading Screen
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#loading {
  position: fixed;
  inset: 0;
  background: var(--color-bg-primary);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 999;
  color: var(--color-accent);
  font-size: 0.8125rem;
  letter-spacing: -0.01em;
  transition: opacity var(--duration-normal) var(--ease-out);
}

#loading h2 {
  font-size: 1.5rem;
  margin-bottom: var(--space-3);
  color: var(--color-text-primary);
  font-weight: 700;
  letter-spacing: -0.02em;
  font-family: var(--font-display);
}

#loading .bar {
  width: 200px;
  height: 4px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-pill);
  overflow: hidden;
  margin-top: var(--space-2);
}

#loading .fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-accent), var(--color-accent-hover));
  width: 0%;
  transition: width 0.2s var(--ease-apple);
  border-radius: var(--radius-pill);
}

.hidden {
  opacity: 0;
  pointer-events: none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Tooltip System
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#tooltip {
  position: fixed;
  background: var(--color-nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border: 1px solid var(--color-nav-border);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
  color: var(--color-text-primary);
  font-size: 0.75rem;
  line-height: 1.5;
  font-family: var(--font-body);
  max-width: 220px;
  z-index: 200;
  display: none;
  pointer-events: none;
  box-shadow: var(--shadow-lg);
}

#tooltip .nm {
  font-weight: 600;
  font-size: 0.875rem;
  letter-spacing: -0.01em;
}

#tooltip .rl {
  color: var(--color-accent);
  font-size: 0.6875rem;
  font-weight: 500;
}

#tooltip .tk {
  color: var(--color-text-secondary);
  font-size: 0.6875rem;
  margin-top: 3px;
}

#tooltip .st {
  font-size: 0.6875rem;
  margin-top: 2px;
  color: var(--color-success);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Navigation Header
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modern-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 52px;
  z-index: 1000;
  background: var(--color-nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-bottom: 1px solid var(--color-nav-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--space-5);
}

.nav-brand {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-family: var(--font-display);
  font-size: 1.125rem;
  font-weight: 700;
  color: var(--color-text-primary);
  letter-spacing: -0.02em;
}

.nav-brand-icon {
  font-size: 1.25rem;
}

.nav-info {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
}

.nav-metric {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.nav-metric-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--color-success);
}

.nav-metric-dot.busy { background: var(--color-warning); }
.nav-metric-dot.error { background: var(--color-error); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Status Bar (Bottom)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modern-statusbar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--color-nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-top: 1px solid var(--color-nav-border);
  padding: var(--space-3) var(--space-5);
  font-family: var(--font-body);
}

.statusbar-left {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.statusbar-info {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-accent);
  box-shadow: 0 0 6px var(--color-accent-light);
  animation: statusPulse 2.5s ease-in-out infinite;
}

@keyframes statusPulse {
  0%, 100% { 
    opacity: 1; 
    transform: scale(1); 
  }
  50% { 
    opacity: 0.6; 
    transform: scale(1.1); 
  }
}

.statusbar-metrics {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.metric {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
}

.metric-value {
  font-weight: 600;
  color: var(--color-text-primary);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Controls Panel
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.controls-panel {
  position: fixed;
  top: 52px;
  right: 0;
  bottom: 64px;
  width: var(--panel-width);
  background: var(--color-nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-left: 1px solid var(--color-nav-border);
  z-index: 40;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform: translateX(100%);
  transition: transform var(--duration-normal) var(--ease-spring);
}

.controls-panel.open {
  transform: translateX(0);
}

.panel-header {
  padding: var(--space-5) var(--space-5) var(--space-4);
  border-bottom: 1px solid var(--color-nav-border);
}

.panel-title {
  font-family: var(--font-display);
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--color-text-primary);
  letter-spacing: -0.02em;
}

.panel-subtitle {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-top: 2px;
}

.panel-content {
  flex: 1;
  padding: var(--space-5);
  overflow-y: auto;
}

.control-section {
  margin-bottom: var(--space-6);
}

.section-title {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--space-3);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.control-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-3);
}

.control-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-4);
  background: var(--color-surface);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  text-decoration: none;
  color: var(--color-text-primary);
}

.control-button:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-accent);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.control-icon {
  font-size: 1.5rem;
}

.control-label {
  font-size: 0.75rem;
  font-weight: 500;
  text-align: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Floating Action Button
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.fab {
  position: fixed;
  bottom: 80px;
  right: var(--space-5);
  width: 56px;
  height: 56px;
  background: var(--color-accent);
  border: none;
  border-radius: 50%;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  z-index: 60;
  box-shadow: var(--shadow-md);
  transition: all var(--duration-fast) var(--ease-out);
}

.fab:hover {
  background: var(--color-accent-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.fab:active {
  background: var(--color-accent-active);
  transform: translateY(0);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   iOS-Style Agent Cards
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.agent-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  margin-bottom: var(--space-3);
  transition: all var(--duration-fast) var(--ease-out);
}

.agent-card:hover {
  background: var(--color-bg-tertiary);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.agent-header {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-3);
}

.agent-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-md);
  background: var(--color-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  color: white;
}

.agent-info h4 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-primary);
  letter-spacing: -0.01em;
}

.agent-info p {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  margin-top: 1px;
}

.agent-status {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: var(--space-1);
  font-size: 0.75rem;
  color: var(--color-success);
}

.agent-metrics {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-2);
}

.metric-item {
  text-align: center;
  padding: var(--space-2);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-sm);
}

.metric-number {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

.metric-desc {
  font-size: 0.625rem;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 1px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Responsive Design
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 768px) {
  .controls-panel {
    width: 100%;
    max-width: var(--panel-width);
  }

  .modern-nav {
    padding: 0 var(--space-4);
  }

  .nav-info {
    display: none;
  }

  .statusbar-metrics {
    display: none;
  }
}

@media (max-width: 480px) {
  .modern-nav {
    height: 48px;
  }

  .controls-panel {
    top: 48px;
  }

  .fab {
    bottom: 70px;
    right: var(--space-4);
    width: 48px;
    height: 48px;
    font-size: 1.25rem;
  }
}
</style>
</head>
<body>
  <!-- iOS-Style Navigation -->
  <div class="modern-nav">
    <div class="nav-brand">
      <span class="nav-brand-icon">ğŸ’</span>
      <span>SpawnKit Modern</span>
    </div>
    <div class="nav-info">
      <div class="nav-metric">
        <div class="nav-metric-dot"></div>
        <span>6 Active</span>
      </div>
      <div class="nav-metric">
        <div class="nav-metric-dot busy"></div>
        <span>2 Busy</span>
      </div>
    </div>
  </div>

  <!-- Main Canvas -->
  <canvas id="canvas"></canvas>

  <!-- iOS-Style Status Bar -->
  <div class="modern-statusbar">
    <div class="statusbar-left">
      <div class="statusbar-info">
        <div class="status-dot"></div>
        <span>SpawnKit Modern Active</span>
      </div>
    </div>
    <div class="statusbar-metrics">
      <div class="metric">
        <span>Agents:</span>
        <span class="metric-value" id="agentCount">8</span>
      </div>
      <div class="metric">
        <span>Tasks:</span>
        <span class="metric-value" id="taskCount">32</span>
      </div>
      <div class="metric">
        <span>FPS:</span>
        <span class="metric-value" id="fpsCounter">60</span>
      </div>
    </div>
  </div>

  <!-- iOS-Style Controls Panel -->
  <div class="controls-panel" id="controlsPanel">
    <div class="panel-header">
      <h2 class="panel-title">Agent Control</h2>
      <p class="panel-subtitle">Manage your AI workforce</p>
    </div>
    
    <div class="panel-content">
      <div class="control-section">
        <h3 class="section-title">Quick Actions</h3>
        <div class="control-grid">
          <button class="control-button" onclick="pauseAll()">
            <div class="control-icon">â¸ï¸</div>
            <div class="control-label">Pause All</div>
          </button>
          <button class="control-button" onclick="resumeAll()">
            <div class="control-icon">â–¶ï¸</div>
            <div class="control-label">Resume All</div>
          </button>
          <button class="control-button" onclick="resetPositions()">
            <div class="control-icon">ğŸ”„</div>
            <div class="control-label">Reset</div>
          </button>
          <button class="control-button" onclick="toggleDebug()">
            <div class="control-icon">ğŸ”</div>
            <div class="control-label">Debug</div>
          </button>
        </div>
      </div>

      <div class="control-section">
        <h3 class="section-title">Active Agents</h3>
        
        <div class="agent-card">
          <div class="agent-header">
            <div class="agent-avatar">ğŸ‘‘</div>
            <div class="agent-info">
              <h4>CEO Agent</h4>
              <p>Strategic Oversight</p>
            </div>
            <div class="agent-status">
              <div class="status-dot"></div>
              <span>Active</span>
            </div>
          </div>
          <div class="agent-metrics">
            <div class="metric-item">
              <div class="metric-number">12</div>
              <div class="metric-desc">Tasks</div>
            </div>
            <div class="metric-item">
              <div class="metric-number">98%</div>
              <div class="metric-desc">Uptime</div>
            </div>
            <div class="metric-item">
              <div class="metric-number">5</div>
              <div class="metric-desc">Reports</div>
            </div>
          </div>
        </div>

        <div class="agent-card">
          <div class="agent-header">
            <div class="agent-avatar" style="background: var(--color-info);">ğŸ—ºï¸</div>
            <div class="agent-info">
              <h4>Atlas Agent</h4>
              <p>Knowledge Mapping</p>
            </div>
            <div class="agent-status" style="color: var(--color-warning);">
              <div class="status-dot" style="background: var(--color-warning);"></div>
              <span>Busy</span>
            </div>
          </div>
          <div class="agent-metrics">
            <div class="metric-item">
              <div class="metric-number">8</div>
              <div class="metric-desc">Tasks</div>
            </div>
            <div class="metric-item">
              <div class="metric-number">94%</div>
              <div class="metric-desc">Uptime</div>
            </div>
            <div class="metric-item">
              <div class="metric-number">3</div>
              <div class="metric-desc">Maps</div>
            </div>
          </div>
        </div>

        <div class="agent-card">
          <div class="agent-header">
            <div class="agent-avatar" style="background: var(--color-warning);">ğŸ”¨</div>
            <div class="agent-info">
              <h4>Forge Agent</h4>
              <p>Development</p>
            </div>
            <div class="agent-status">
              <div class="status-dot"></div>
              <span>Active</span>
            </div>
          </div>
          <div class="agent-metrics">
            <div class="metric-item">
              <div class="metric-number">15</div>
              <div class="metric-desc">Tasks</div>
            </div>
            <div class="metric-item">
              <div class="metric-number">99%</div>
              <div class="metric-desc">Uptime</div>
            </div>
            <div class="metric-item">
              <div class="metric-number">7</div>
              <div class="metric-desc">Builds</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- iOS-Style Floating Action Button -->
  <button class="fab" onclick="toggleControls()">âš™ï¸</button>

  <!-- iOS-Style Tooltip -->
  <div id="tooltip">
    <div class="nm"></div>
    <div class="rl"></div>
    <div class="tk"></div>
    <div class="st"></div>
  </div>

  <!-- iOS-Style Loading Screen -->
  <div id="loading">
    <h2>Loading SpawnKit Modern</h2>
    <div>Initializing pixel-perfect workspace...</div>
    <div class="bar">
      <div class="fill"></div>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Modern Theme JavaScript with iOS Integration
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // Canvas and rendering
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let agents = [];
    let animationId;
    let fpsCounter = 0;
    let lastFpsUpdate = Date.now();

    // Control panel state
    let controlsOpen = false;
    let debugMode = false;
    let paused = false;

    // Initialize the application
    function init() {
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      
      // Initialize agents
      initializeAgents();
      
      // Setup mouse events
      setupMouseEvents();
      
      // Start render loop
      animate();
      
      // Simulate loading
      simulateLoading();
      
      // Update metrics
      setInterval(updateMetrics, 1000);
    }

    function resizeCanvas() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    }

    function initializeAgents() {
      const agentTypes = [
        { name: 'CEO', icon: 'ğŸ‘‘', color: '#8b5cf6', role: 'Strategic Oversight' },
        { name: 'Atlas', icon: 'ğŸ—ºï¸', color: '#64d2ff', role: 'Knowledge Mapping' },
        { name: 'Forge', icon: 'ğŸ”¨', color: '#ffd60a', role: 'Development' },
        { name: 'Hunter', icon: 'ğŸ¯', color: '#ff453a', role: 'Data Collection' },
        { name: 'Echo', icon: 'ğŸ“¡', color: '#0077ed', role: 'Communication' },
        { name: 'Sentinel', icon: 'ğŸ›¡ï¸', color: '#30d158', role: 'Security' },
        { name: 'Pixel', icon: 'ğŸ¨', color: '#ff375f', role: 'Design' },
        { name: 'Vector', icon: 'ğŸ“', color: '#ff9f0a', role: 'Architecture' }
      ];

      agents = agentTypes.map((type, index) => ({
        id: index,
        name: type.name + ' Agent',
        role: type.role,
        icon: type.icon,
        color: type.color,
        x: Math.random() * (width - 100) + 50,
        y: Math.random() * (height - 200) + 100,
        vx: (Math.random() - 0.5) * 2,
        vy: (Math.random() - 0.5) * 2,
        size: 32,
        tasks: Math.floor(Math.random() * 20) + 5,
        uptime: 90 + Math.random() * 10,
        status: Math.random() > 0.3 ? 'active' : 'busy'
      }));
    }

    function setupMouseEvents() {
      let tooltip = document.getElementById('tooltip');
      let hoveredAgent = null;

      canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;

        // Check for agent hover
        hoveredAgent = null;
        for (let agent of agents) {
          const dx = mouseX - agent.x;
          const dy = mouseY - agent.y;
          if (Math.sqrt(dx * dx + dy * dy) < agent.size / 2 + 10) {
            hoveredAgent = agent;
            break;
          }
        }

        if (hoveredAgent) {
          tooltip.querySelector('.nm').textContent = hoveredAgent.name;
          tooltip.querySelector('.rl').textContent = hoveredAgent.role;
          tooltip.querySelector('.tk').textContent = `${hoveredAgent.tasks} active tasks`;
          tooltip.querySelector('.st').textContent = `${hoveredAgent.uptime.toFixed(1)}% uptime`;
          
          tooltip.style.left = (e.clientX + 10) + 'px';
          tooltip.style.top = (e.clientY - 10) + 'px';
          tooltip.style.display = 'block';
        } else {
          tooltip.style.display = 'none';
        }
      });

      canvas.addEventListener('mouseleave', () => {
        tooltip.style.display = 'none';
      });
    }

    function animate() {
      if (!paused) {
        update();
      }
      render();
      
      // FPS counter
      fpsCounter++;
      if (Date.now() - lastFpsUpdate > 1000) {
        document.getElementById('fpsCounter').textContent = fpsCounter;
        fpsCounter = 0;
        lastFpsUpdate = Date.now();
      }

      animationId = requestAnimationFrame(animate);
    }

    function update() {
      agents.forEach(agent => {
        // Simple movement
        agent.x += agent.vx;
        agent.y += agent.vy;

        // Bounce off edges
        if (agent.x < agent.size/2 || agent.x > width - agent.size/2) {
          agent.vx *= -1;
        }
        if (agent.y < agent.size/2 + 52 || agent.y > height - agent.size/2 - 64) {
          agent.vy *= -1;
        }

        // Keep in bounds
        agent.x = Math.max(agent.size/2, Math.min(width - agent.size/2, agent.x));
        agent.y = Math.max(agent.size/2 + 52, Math.min(height - agent.size/2 - 64, agent.y));
      });
    }

    function render() {
      // Clear canvas
      ctx.fillStyle = '#0a0a0c';
      ctx.fillRect(0, 0, width, height);

      // Draw grid if debug mode
      if (debugMode) {
        drawGrid();
      }

      // Draw connections between agents
      drawConnections();

      // Draw agents
      agents.forEach(agent => {
        drawAgent(agent);
      });

      // Draw debug info
      if (debugMode) {
        drawDebugInfo();
      }
    }

    function drawGrid() {
      ctx.strokeStyle = 'rgba(139, 92, 246, 0.1)';
      ctx.lineWidth = 1;
      ctx.setLineDash([5, 5]);

      const gridSize = 50;
      for (let x = 0; x < width; x += gridSize) {
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, height);
        ctx.stroke();
      }
      for (let y = 0; y < height; y += gridSize) {
        ctx.beginPath();
        ctx.moveTo(0, y);
        ctx.lineTo(width, y);
        ctx.stroke();
      }
      ctx.setLineDash([]);
    }

    function drawConnections() {
      ctx.strokeStyle = 'rgba(139, 92, 246, 0.2)';
      ctx.lineWidth = 2;

      agents.forEach((agent, i) => {
        agents.slice(i + 1).forEach(other => {
          const distance = Math.sqrt(
            Math.pow(agent.x - other.x, 2) + 
            Math.pow(agent.y - other.y, 2)
          );

          if (distance < 200) {
            ctx.beginPath();
            ctx.moveTo(agent.x, agent.y);
            ctx.lineTo(other.x, other.y);
            ctx.stroke();
          }
        });
      });
    }

    function drawAgent(agent) {
      // Agent body
      ctx.fillStyle = agent.color;
      ctx.beginPath();
      ctx.arc(agent.x, agent.y, agent.size / 2, 0, Math.PI * 2);
      ctx.fill();

      // Status ring
      const statusColors = {
        active: '#30d158',
        busy: '#ffd60a',
        idle: '#86868b',
        error: '#ff453a'
      };

      ctx.strokeStyle = statusColors[agent.status];
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.arc(agent.x, agent.y, agent.size / 2 + 5, 0, Math.PI * 2);
      ctx.stroke();

      // Agent icon (simplified)
      ctx.fillStyle = 'white';
      ctx.font = '20px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(agent.icon, agent.x, agent.y);
    }

    function drawDebugInfo() {
      ctx.fillStyle = 'rgba(245, 245, 247, 0.9)';
      ctx.font = '12px Inter, monospace';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      
      let y = 70;
      agents.forEach(agent => {
        ctx.fillText(
          `${agent.name}: (${agent.x.toFixed(0)}, ${agent.y.toFixed(0)}) ${agent.status}`,
          10, y
        );
        y += 16;
      });
    }

    function simulateLoading() {
      const loading = document.getElementById('loading');
      const fill = loading.querySelector('.fill');
      let progress = 0;

      const interval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress > 100) progress = 100;

        fill.style.width = progress + '%';

        if (progress >= 100) {
          clearInterval(interval);
          setTimeout(() => {
            loading.classList.add('hidden');
          }, 500);
        }
      }, 100);
    }

    function updateMetrics() {
      document.getElementById('agentCount').textContent = agents.length;
      document.getElementById('taskCount').textContent = 
        agents.reduce((sum, agent) => sum + agent.tasks, 0);
    }

    // Control functions
    function toggleControls() {
      const panel = document.getElementById('controlsPanel');
      controlsOpen = !controlsOpen;
      panel.classList.toggle('open', controlsOpen);
    }

    function pauseAll() {
      paused = true;
      console.log('All agents paused');
    }

    function resumeAll() {
      paused = false;
      console.log('All agents resumed');
    }

    function resetPositions() {
      agents.forEach(agent => {
        agent.x = Math.random() * (width - 100) + 50;
        agent.y = Math.random() * (height - 200) + 100;
        agent.vx = (Math.random() - 0.5) * 2;
        agent.vy = (Math.random() - 0.5) * 2;
      });
      console.log('Agent positions reset');
    }

    function toggleDebug() {
      debugMode = !debugMode;
      console.log('Debug mode:', debugMode ? 'ON' : 'OFF');
    }

    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', init);

    console.log('ğŸ’ SpawnKit Modern theme loaded with iOS branding');
  </script>
</body>
</html>