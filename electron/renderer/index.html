<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SpawnKit â€” Setup Wizard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SpawnKit Setup Wizard â€” Embedded Styles
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    :root {
      --accent: #007AFF;
      --accent-hover: #0066D6;
      --accent-light: rgba(0, 122, 255, 0.08);
      --accent-glow: rgba(0, 122, 255, 0.2);
      --bg-primary: #F2F2F7;
      --bg-secondary: #FFFFFF;
      --bg-tertiary: #E5E5EA;
      --bg-elevated: #FFFFFF;
      --text-primary: #1C1C1E;
      --text-secondary: #3C3C43;
      --text-muted: #8E8E93;
      --border: rgba(60, 60, 67, 0.12);
      --border-light: rgba(60, 60, 67, 0.08);
      --success: #34C759;
      --success-bg: rgba(52, 199, 89, 0.1);
      --error: #FF3B30;
      --error-bg: rgba(255, 59, 48, 0.1);
      --warning: #FF9500;
      --warning-bg: rgba(255, 149, 0, 0.1);
      --radius: 12px;
      --radius-sm: 8px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08), 0 1px 4px rgba(0,0,0,0.04);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.10), 0 2px 8px rgba(0,0,0,0.04);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -webkit-app-region: drag;
      overflow-x: hidden;
      min-height: 100vh;
    }

    button, input, select, textarea, a, label, .interactive, .option-card, .theme-card, .advanced-toggle {
      -webkit-app-region: no-drag;
    }

    /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .wizard-container {
      max-width: 560px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .wizard-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo {
      font-size: 2rem;
      font-weight: 800;
      color: var(--accent);
      -webkit-background-clip: initial;
      -webkit-text-fill-color: initial;
      background-clip: initial;
      margin-bottom: 0.25rem;
    }

    .logo-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      font-weight: 500;
    }

    /* â”€â”€ Progress Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .progress-bar {
      display: flex;
      align-items: center;
      gap: 0;
      margin: 1.5rem 0 2rem;
      position: relative;
    }

    .progress-segment {
      flex: 1;
      height: 3px;
      background: var(--bg-tertiary);
      transition: background 0.4s ease;
      position: relative;
    }

    .progress-segment.completed { background: var(--accent); }
    .progress-segment.active {
      background: linear-gradient(90deg, var(--accent) 0%, var(--bg-tertiary) 100%);
    }

    .progress-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 0.5rem;
    }

    .progress-label {
      font-size: 0.65rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: color 0.3s ease;
      text-align: center;
      flex: 1;
    }

    .progress-label.active { color: var(--accent); font-weight: 600; }
    .progress-label.completed { color: var(--text-secondary); }

    /* â”€â”€ Step Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .step { display: none; animation: fadeUp 0.35s ease; }
    .step.active { display: block; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .step-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .step-subtitle {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }

    /* â”€â”€ Status Badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.5rem 0.85rem;
      border-radius: var(--radius);
      font-size: 0.8rem;
      font-weight: 500;
      margin: 0.75rem 0;
    }

    .status-success { background: var(--success-bg); color: var(--success); }
    .status-error { background: var(--error-bg); color: var(--error); }
    .status-warning { background: var(--warning-bg); color: var(--warning); }

    /* â”€â”€ Option Cards (for API step) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .option-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      margin-bottom: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
      position: relative;
    }

    .option-card:hover { border-color: var(--border-light); background: var(--bg-tertiary); }
    .option-card.selected { border-color: var(--accent); background: var(--accent-light); }

    .option-card-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .option-icon {
      width: 36px;
      height: 36px;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      flex-shrink: 0;
    }

    .option-card-title {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--text-primary);
    }

    .option-card-desc {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    .option-detail {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
      display: none;
    }

    .option-card.selected .option-detail.has-content { display: block; }

    /* â”€â”€ Form Elements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-input {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg-primary);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      color: var(--text-primary);
      font-size: 0.875rem;
      font-family: inherit;
      transition: all 0.2s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-light);
    }

    .form-input::placeholder { color: var(--text-muted); }

    .form-label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.4rem;
      color: var(--text-primary);
      font-size: 0.8rem;
    }

    .form-help {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.4rem;
      line-height: 1.4;
    }

    .form-help a { color: var(--accent); text-decoration: none; }
    .form-help a:hover { text-decoration: underline; }

    .form-error {
      font-size: 0.75rem;
      color: var(--error);
      margin-top: 0.4rem;
      display: none;
    }

    .form-error.visible { display: block; }

    /* â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 28px;
      border-radius: var(--radius);
      border: none;
      font-weight: 600;
      font-size: 0.875rem;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      min-height: 44px;
      gap: 8px;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover:not(:disabled) {
      background: var(--accent-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px var(--accent-glow);
    }

    .btn-secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover:not(:disabled) {
      background: var(--bg-secondary);
      border-color: var(--border-light);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      padding: 8px 16px;
    }

    .btn-ghost:hover { color: var(--text-secondary); }

    .btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none !important; box-shadow: none !important; }

    .btn-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      gap: 1rem;
    }

    .btn-row-right {
      display: flex;
      gap: 0.75rem;
      align-items: center;
    }

    /* â”€â”€ Advanced Toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .advanced-toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.75rem;
      color: var(--text-muted);
      cursor: pointer;
      margin-top: 1rem;
      background: none;
      border: none;
      font-family: inherit;
      padding: 0.25rem 0;
      transition: color 0.2s;
    }

    .advanced-toggle:hover { color: var(--text-secondary); }

    .advanced-toggle .chevron {
      transition: transform 0.2s;
      font-size: 0.6rem;
    }

    .advanced-toggle.open .chevron { transform: rotate(90deg); }

    .advanced-panel {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
    }

    .advanced-panel.open {
      max-height: 200px;
      padding-top: 1rem;
    }

    /* â”€â”€ Tooltip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tooltip-trigger {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      cursor: help;
    }

    .tooltip-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      color: var(--text-muted);
      font-size: 0.6rem;
      font-weight: 700;
      flex-shrink: 0;
      border: 1px solid var(--border);
    }

    .tooltip-content {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) scale(0.95);
      background: var(--bg-elevated);
      border: 1px solid var(--border-light);
      border-radius: var(--radius);
      padding: 0.6rem 0.85rem;
      font-size: 0.75rem;
      color: var(--text-secondary);
      width: 260px;
      line-height: 1.5;
      box-shadow: var(--shadow-md);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s, transform 0.2s;
      z-index: 100;
    }

    .tooltip-trigger:hover .tooltip-content,
    .tooltip-trigger:focus .tooltip-content {
      opacity: 1;
      transform: translateX(-50%) scale(1);
      pointer-events: auto;
    }

    /* â”€â”€ Agent Cards (Meet Your Team) â”€â”€â”€â”€â”€â”€â”€â”€ */
    .team-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin: 1.25rem 0;
    }

    .team-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 1.1rem;
      text-align: left;
      transition: all 0.25s ease;
    }

    .team-card:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .team-card-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.4rem;
    }

    .team-avatar {
      width: 32px;
      height: 32px;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }

    .team-name {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--text-primary);
    }

    .team-role {
      font-size: 0.65rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    .team-desc {
      font-size: 0.78rem;
      color: var(--text-secondary);
      line-height: 1.4;
      margin-top: 0.35rem;
    }

    /* Sentinel card spans full width at bottom */
    .team-card-sentinel {
      grid-column: 1 / -1;
    }

    /* â”€â”€ Theme Selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .theme-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin: 1.25rem 0;
    }

    .theme-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      cursor: pointer;
      transition: all 0.25s ease;
    }

    .theme-card:hover { border-color: var(--border-light); transform: translateY(-2px); }
    .theme-card.selected { border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-glow); }

    .theme-preview {
      height: 80px;
      position: relative;
      overflow: hidden;
    }

    .theme-info {
      padding: 0.75rem;
    }

    .theme-name {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--text-primary);
    }

    .theme-desc {
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 0.1rem;
    }

    .theme-selected-badge {
      position: absolute;
      top: 6px;
      right: 6px;
      background: var(--accent);
      color: white;
      font-size: 0.6rem;
      padding: 2px 6px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      display: none;
    }

    .theme-card.selected .theme-selected-badge { display: block; }

    /* Theme preview mockups */
    .preview-gameboy {
      background: #9bbc0f;
      display: flex; align-items: center; justify-content: center;
    }
    .preview-gameboy-inner {
      width: 60%;
      height: 55%;
      background: #0f380f;
      border-radius: 4px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 3px;
      padding: 6px;
    }
    .preview-gameboy-inner span {
      background: #306230;
      border-radius: 2px;
    }

    .preview-corporate {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      display: flex; align-items: center; justify-content: center;
    }
    .preview-corporate-inner {
      width: 70%;
      height: 60%;
      display: flex;
      gap: 4px;
    }
    .preview-corporate-sidebar {
      width: 25%;
      background: rgba(255,255,255,0.06);
      border-radius: 3px;
    }
    .preview-corporate-main {
      flex: 1;
      background: rgba(255,255,255,0.03);
      border-radius: 3px;
      display: flex;
      flex-direction: column;
      gap: 3px;
      padding: 4px;
    }
    .preview-corporate-main span {
      background: rgba(255,255,255,0.08);
      height: 6px;
      border-radius: 2px;
    }

    .preview-retro {
      background: #2b2b3d;
      display: flex; align-items: center; justify-content: center;
    }
    .preview-retro-inner {
      width: 65%;
      height: 55%;
      border: 2px solid #ff6b9d;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    .preview-retro-inner span {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    .preview-retro-inner span:nth-child(1) { background: #ff6b9d; }
    .preview-retro-inner span:nth-child(2) { background: #c44dff; }
    .preview-retro-inner span:nth-child(3) { background: #4dffdb; }

    .preview-minimal {
      background: #fafafa;
      display: flex; align-items: center; justify-content: center;
    }
    .preview-minimal-inner {
      width: 60%;
      height: 50%;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .preview-minimal-inner span {
      background: #e5e5e5;
      height: 8px;
      border-radius: 2px;
    }
    .preview-minimal-inner span:first-child { width: 60%; }
    .preview-minimal-inner span:last-child { width: 80%; }

    /* â”€â”€ Demo Mode Watermark â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .demo-watermark {
      position: fixed;
      top: 12px;
      right: 12px;
      background: var(--warning-bg);
      color: var(--warning);
      font-size: 0.7rem;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: var(--radius-sm);
      letter-spacing: 1px;
      text-transform: uppercase;
      z-index: 1000;
      display: none;
    }

    .demo-watermark.visible { display: block; }

    /* â”€â”€ Skip Link â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .skip-link {
      display: inline-block;
      color: var(--text-muted);
      font-size: 0.78rem;
      text-decoration: none;
      margin-top: 1.25rem;
      transition: color 0.2s;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
    }

    .skip-link:hover { color: var(--text-secondary); text-decoration: underline; }

    /* â”€â”€ Spinner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ Detection Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .detection-result {
      margin: 1rem 0;
      padding: 1rem;
      border-radius: var(--radius-lg);
      background: var(--bg-secondary);
      border: 1px solid var(--border);
    }

    .detection-result.success { border-color: var(--success); background: var(--success-bg); }
    .detection-result.warning { border-color: var(--warning); background: var(--warning-bg); }

    .detection-icon {
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
    }

    .detection-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.2rem;
    }

    .detection-path {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-family: 'SF Mono', Monaco, monospace;
    }

    .detection-action {
      margin-top: 0.5rem;
    }

    .detection-action a {
      color: var(--accent);
      text-decoration: none;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .detection-action a:hover { text-decoration: underline; }

    /* â”€â”€ Validation Feedback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .validation-result {
      margin-top: 0.75rem;
      display: none;
    }

    .validation-result.visible { display: block; }

    .validation-provider {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.8rem;
      margin-bottom: 0.25rem;
    }

    .validation-note {
      font-size: 0.72rem;
      color: var(--text-muted);
      font-style: italic;
    }

    /* â”€â”€ Finish screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .finish-screen {
      text-align: center;
    }

    .finish-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.5); }
      100% { opacity: 1; transform: scale(1); }
    }

    .finish-summary {
      margin: 1.5rem 0;
      text-align: left;
    }

    .finish-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.6rem 0;
      border-bottom: 1px solid var(--border);
      font-size: 0.85rem;
    }

    .finish-row:last-child { border-bottom: none; }

    .finish-label { color: var(--text-muted); }
    .finish-value { color: var(--text-primary); font-weight: 500; }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 480px) {
      .wizard-container { padding: 1.25rem 1rem; }
      .team-grid { grid-template-columns: 1fr; }
      .theme-grid { grid-template-columns: 1fr; }
      .team-card-sentinel { grid-column: auto; }
    }

    /* â”€â”€ Focus Management â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      margin: -1px;
      padding: 0;
      overflow: hidden;
      clip: rect(0,0,0,0);
      border: 0;
    }
  </style>
</head>
<body>

  <!-- Demo Mode Watermark (shown when user skips setup) -->
  <div class="demo-watermark" id="demoWatermark">DEMO MODE</div>

  <div class="wizard-container" role="main">

    <!-- Header -->
    <div class="wizard-header">
      <div class="logo">SpawnKit</div>
      <div class="logo-subtitle">Your AI Executive Team</div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="4" id="progressBar">
      <div class="progress-segment completed" data-step="1"></div>
      <div class="progress-segment" data-step="2"></div>
      <div class="progress-segment" data-step="3"></div>
      <div class="progress-segment" data-step="4"></div>
    </div>
    <div class="progress-labels">
      <span class="progress-label active" data-step="1">Workspace</span>
      <span class="progress-label" data-step="2">AI Provider</span>
      <span class="progress-label" data-step="3">Your Team</span>
      <span class="progress-label" data-step="4">Theme</span>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         STEP 1: Workspace Detection
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step active" id="step1" data-step="1">
      <h2 class="step-title">Let's find your workspace</h2>
      <p class="step-subtitle">SpawnKit needs a place to save your team's work. We'll try to find it automatically.</p>

      <div id="workspaceDetecting" style="text-align:center; padding: 2rem 0;">
        <div class="spinner" style="width:24px; height:24px; margin: 0 auto 0.75rem;"></div>
        <p style="font-size: 0.85rem; color: var(--text-muted);">Looking for OpenClawâ€¦</p>
      </div>

      <div id="workspaceFound" class="detection-result success" style="display:none;">
        <div class="detection-icon">âœ…</div>
        <div class="detection-title">OpenClaw workspace found!</div>
        <div class="detection-path" id="workspacePathDisplay"></div>
      </div>

      <div id="workspaceNotFound" class="detection-result warning" style="display:none;">
        <div class="detection-icon">âš ï¸</div>
        <div class="detection-title">OpenClaw not detected</div>
        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0.3rem 0 0;">
          We couldn't find an OpenClaw installation. You can install it or set a path manually.
        </p>
        <div class="detection-action">
          <a href="https://openclaw.dev" target="_blank">Download OpenClaw â†’</a>
        </div>
      </div>

      <!-- Advanced: manual path -->
      <button class="advanced-toggle" id="advancedToggle" aria-expanded="false" aria-controls="advancedPanel">
        <span class="chevron">â–¶</span> Advanced options
      </button>

      <div class="advanced-panel" id="advancedPanel" role="region" aria-labelledby="advancedToggle">
        <div style="margin-top: 0.5rem;">
          <label class="form-label" for="workspacePathInput">Workspace path</label>
          <div style="display:flex; gap: 0.5rem;">
            <input type="text" class="form-input" id="workspacePathInput"
                   placeholder="/path/to/workspace"
                   aria-describedby="pathHelp">
            <button class="btn btn-secondary" id="btnBrowse" style="padding: 10px 14px; white-space: nowrap;"
                    aria-label="Browse for folder">ğŸ“‚ Browse</button>
          </div>
          <div class="form-help" id="pathHelp">
            This is where SpawnKit stores your AI team's files. Usually <code>~/.openclaw/workspace</code>
          </div>
        </div>
      </div>

      <div class="btn-row">
        <button class="skip-link" id="btnSkipAll" aria-label="Skip setup and use demo mode">
          Just show me the demo â†’
        </button>
        <div class="btn-row-right">
          <button class="btn btn-primary" id="btnStep1Next" disabled>Continue â†’</button>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         STEP 2: Connect AI Provider
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step2" data-step="2">
      <h2 class="step-title">Connect your AI brain</h2>
      <p class="step-subtitle">SpawnKit needs an AI provider to power your executive team. Choose how to connect:</p>

      <!-- Option A: I have an API key -->
      <div class="option-card" id="optionApiKey" tabindex="0" role="button" aria-pressed="false">
        <div class="option-card-header">
          <div class="option-icon" style="background: var(--accent-light);">ğŸ”‘</div>
          <div>
            <div class="option-card-title">
              I have an API key
              <span class="tooltip-trigger" tabindex="0">
                <span class="tooltip-icon">?</span>
                <span class="tooltip-content">
                  An API key is like a password that lets SpawnKit talk to an AI service. You get one when you sign up with a provider like Anthropic or OpenAI. It's free to start.
                </span>
              </span>
            </div>
            <div class="option-card-desc">Paste your key from Anthropic, OpenAI, or another provider</div>
          </div>
        </div>
        <div class="option-detail has-content" id="apiKeyDetail">
          <label class="form-label" for="apiKeyInput">Your API key</label>
          <input type="password" class="form-input" id="apiKeyInput"
                 placeholder="sk-ant-... or sk-..."
                 autocomplete="off" spellcheck="false"
                 aria-describedby="apiKeyHelp apiKeyError">
          <div class="form-help" id="apiKeyHelp">
            <a href="https://console.anthropic.com/account/keys" target="_blank">Get one free from Anthropic â†’</a>
            &nbsp;Â·&nbsp;
            <a href="https://platform.openai.com/api-keys" target="_blank">Or from OpenAI â†’</a>
          </div>
          <div class="form-error" id="apiKeyError" role="alert"></div>
          <div class="validation-result" id="apiKeyValidation">
            <div class="validation-provider" id="apiKeyProviderBadge"></div>
            <div class="validation-note">Full validation will happen when you send your first mission.</div>
          </div>
        </div>
      </div>

      <!-- Option B: OpenClaw built-in -->
      <div class="option-card" id="optionOpenClaw" tabindex="0" role="button" aria-pressed="false">
        <div class="option-card-header">
          <div class="option-icon" style="background: var(--success-bg);">ğŸ”—</div>
          <div>
            <div class="option-card-title">Use OpenClaw's built-in provider</div>
            <div class="option-card-desc">Auto-detected from your OpenClaw configuration</div>
          </div>
        </div>
        <div class="option-detail has-content" id="openclawDetail">
          <div id="openclawDetected" style="display:none;">
            <div class="status-badge status-success">âœ… Using your OpenClaw configuration</div>
          </div>
          <div id="openclawNotDetected" style="display:none;">
            <div class="status-badge status-warning">âš ï¸ No OpenClaw config found</div>
            <p class="form-help">Make sure OpenClaw is installed and configured with an AI provider.</p>
          </div>
        </div>
      </div>

      <!-- Option C: Skip -->
      <div class="option-card" id="optionSkip" tabindex="0" role="button" aria-pressed="false">
        <div class="option-card-header">
          <div class="option-icon" style="background: var(--warning-bg);">â­ï¸</div>
          <div>
            <div class="option-card-title">I'll set this up later</div>
            <div class="option-card-desc">Explore the office with demo data â€” no AI features yet</div>
          </div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-ghost" id="btnStep2Back">â† Back</button>
        <div class="btn-row-right">
          <button class="btn btn-primary" id="btnStep2Next" disabled>Continue â†’</button>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         STEP 3: Meet Your Team
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step3" data-step="3">
      <h2 class="step-title">Meet your executive team</h2>
      <p class="step-subtitle">These five AI agents will run your business. Each has a distinct personality and specialty.</p>

      <div class="team-grid">
        <div class="team-card">
          <div class="team-card-header">
            <div class="team-avatar" style="background: rgba(239, 68, 68, 0.15);">ğŸ¯</div>
            <div>
              <div class="team-name">Hunter</div>
              <div class="team-role">CRO Â· Revenue</div>
            </div>
          </div>
          <div class="team-desc">Revenue hunter. Finds opportunities and closes deals.</div>
        </div>

        <div class="team-card">
          <div class="team-card-header">
            <div class="team-avatar" style="background: rgba(99, 102, 241, 0.15);">ğŸ”¨</div>
            <div>
              <div class="team-name">Forge</div>
              <div class="team-role">CTO Â· Engineering</div>
            </div>
          </div>
          <div class="team-desc">Chief architect. Builds, optimizes, deletes the unnecessary.</div>
        </div>

        <div class="team-card">
          <div class="team-card-header">
            <div class="team-avatar" style="background: rgba(168, 85, 247, 0.15);">ğŸ“£</div>
            <div>
              <div class="team-name">Echo</div>
              <div class="team-role">CMO Â· Marketing</div>
            </div>
          </div>
          <div class="team-desc">Brand storyteller. Makes people care about your product.</div>
        </div>

        <div class="team-card">
          <div class="team-card-header">
            <div class="team-avatar" style="background: rgba(16, 185, 129, 0.15);">âš™ï¸</div>
            <div>
              <div class="team-name">Atlas</div>
              <div class="team-role">COO Â· Operations</div>
            </div>
          </div>
          <div class="team-desc">Operations master. Keeps everything running smoothly.</div>
        </div>

        <div class="team-card team-card-sentinel">
          <div class="team-card-header">
            <div class="team-avatar" style="background: rgba(245, 158, 11, 0.15);">ğŸ›¡ï¸</div>
            <div>
              <div class="team-name">Sentinel</div>
              <div class="team-role">Auditor Â· Quality</div>
            </div>
          </div>
          <div class="team-desc">Quality guardian. Nothing ships without approval.</div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-ghost" id="btnStep3Back">â† Back</button>
        <div class="btn-row-right">
          <button class="btn btn-primary" id="btnStep3Next">Continue â†’</button>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         STEP 4: Theme Selection
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step4" data-step="4">
      <h2 class="step-title">Choose your office style</h2>
      <p class="step-subtitle">Pick a look for your workspace. You can change this anytime from settings âš™ï¸</p>

      <div class="theme-grid">
        <!-- GameBoy -->
        <div class="theme-card" data-theme="gameboy" tabindex="0" role="radio" aria-checked="false">
          <div class="theme-preview preview-gameboy">
            <div class="theme-selected-badge">SELECTED</div>
            <div class="preview-gameboy-inner">
              <span></span><span></span><span></span>
              <span></span><span></span><span></span>
            </div>
          </div>
          <div class="theme-info">
            <div class="theme-name">ğŸ® GameBoy</div>
            <div class="theme-desc">Pixel-retro nostalgia</div>
          </div>
        </div>

        <!-- Sims -->
        <div class="theme-card" data-theme="sims" tabindex="0" role="radio" aria-checked="false">
          <div class="theme-preview preview-corporate">
            <div class="theme-selected-badge">SELECTED</div>
            <div class="preview-corporate-inner">
              <div class="preview-corporate-sidebar" style="background: #0a0a0a; border-right: 1px solid #00ffff;"></div>
              <div class="preview-corporate-main" style="background: #0a0a0a;">
                <span style="background: #00ffff;"></span><span style="background: #ff0040;"></span><span style="background: #00ff88;"></span>
              </div>
            </div>
          </div>
          <div class="theme-info">
            <div class="theme-name">ğŸ  Sims</div>
            <div class="theme-desc">Cozy virtual office life</div>
          </div>
        </div>

        <!-- Executive -->
        <div class="theme-card selected" data-theme="executive" tabindex="0" role="radio" aria-checked="true">
          <div class="theme-preview preview-retro">
            <div class="theme-selected-badge">SELECTED</div>
            <div class="preview-retro-inner" style="background: linear-gradient(135deg, #1a1a2e, #16213e);">
              <span style="background: #c9a84c;"></span><span style="background: #d4af37;"></span><span style="background: #ffd700;"></span>
            </div>
          </div>
          <div class="theme-info">
            <div class="theme-name">ğŸ¢ Executive</div>
            <div class="theme-desc">Luxury boardroom, KPI dashboards</div>
          </div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-ghost" id="btnStep4Back">â† Back</button>
        <div class="btn-row-right">
          <button class="btn btn-primary" id="btnFinish">Launch SpawnKit ğŸš€</button>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         FINISH SCREEN
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="stepFinish" data-step="finish">
      <div class="finish-screen">
        <div class="finish-icon">ğŸš€</div>
        <h2 class="step-title">You're all set!</h2>
        <p class="step-subtitle">Your AI executive team is ready to go.</p>

        <div class="finish-summary">
          <div class="finish-row">
            <span class="finish-label">Workspace</span>
            <span class="finish-value" id="finishWorkspace">â€”</span>
          </div>
          <div class="finish-row">
            <span class="finish-label">AI Provider</span>
            <span class="finish-value" id="finishProvider">â€”</span>
          </div>
          <div class="finish-row">
            <span class="finish-label">Theme</span>
            <span class="finish-value" id="finishTheme">â€”</span>
          </div>
        </div>

        <button class="btn btn-primary" id="btnEnterOffice" style="width: 100%; margin-top: 1rem;">
          Enter your office â†’
        </button>
      </div>
    </div>

  </div>

  <script>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SpawnKit Setup Wizard â€” Logic
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const state = {
      currentStep: 1,
      workspacePath: null,
      workspaceDetected: false,
      aiProvider: null,       // 'apiKey' | 'openclaw' | 'skip'
      apiKey: null,
      providerName: null,     // e.g. 'Anthropic (Claude)'
      theme: 'executive',
      demoMode: false,
      openclawConfigFound: false
    };

    // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    function showStep(n) {
      $$('.step').forEach(s => s.classList.remove('active'));
      const target = n === 'finish' ? '#stepFinish' : `#step${n}`;
      $(target).classList.add('active');
      state.currentStep = n;
      updateProgress(n);

      // Focus management: move focus to the step title
      const step = $(target);
      const title = step.querySelector('.step-title');
      if (title) {
        title.setAttribute('tabindex', '-1');
        title.focus();
      }
    }

    function updateProgress(step) {
      const segments = $$('.progress-segment');
      const labels = $$('.progress-label');
      const stepNum = step === 'finish' ? 5 : step;

      segments.forEach((seg, i) => {
        seg.classList.remove('completed', 'active');
        if (i + 1 < stepNum) seg.classList.add('completed');
        else if (i + 1 === stepNum) seg.classList.add('active');
      });

      labels.forEach((lbl, i) => {
        lbl.classList.remove('active', 'completed');
        if (i + 1 < stepNum) lbl.classList.add('completed');
        else if (i + 1 === stepNum) lbl.classList.add('active');
      });

      if (step === 'finish') {
        segments.forEach(s => s.classList.add('completed'));
        labels.forEach(l => l.classList.add('completed'));
      }
    }

    // â”€â”€ Step 1: Workspace Detection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function detectWorkspace() {
      const detecting = $('#workspaceDetecting');
      const found = $('#workspaceFound');
      const notFound = $('#workspaceNotFound');

      // Simulate detection (in real Electron, use IPC to check filesystem)
      setTimeout(() => {
        detecting.style.display = 'none';

        // Try to detect via Electron API or fall back to common paths
        const commonPaths = [
          { path: '~/.openclaw/workspace', display: '~/.openclaw/workspace' },
          { path: '~/openclaw', display: '~/openclaw' },
          { path: './', display: 'Current directory' }
        ];

        let detected = false;

        if (window.electronAPI && window.electronAPI.detectWorkspace) {
          // Real Electron path detection
          window.electronAPI.detectWorkspace().then(result => {
            if (result && result.path) {
              showWorkspaceFound(result.path);
            } else {
              showWorkspaceNotFound();
            }
          }).catch(() => {
            showWorkspaceNotFound();
          });
        } else {
          // Simulate finding the workspace (demo)
          showWorkspaceFound('~/.openclaw/workspace');
        }
      }, 800);
    }

    function showWorkspaceFound(path) {
      $('#workspaceDetecting').style.display = 'none';
      $('#workspaceFound').style.display = 'block';
      $('#workspaceNotFound').style.display = 'none';
      $('#workspacePathDisplay').textContent = path;
      $('#workspacePathInput').value = path;
      state.workspacePath = path;
      state.workspaceDetected = true;
      $('#btnStep1Next').disabled = false;
    }

    function showWorkspaceNotFound() {
      $('#workspaceDetecting').style.display = 'none';
      $('#workspaceFound').style.display = 'none';
      $('#workspaceNotFound').style.display = 'block';
      state.workspaceDetected = false;

      // Auto-open advanced panel so they can set path
      openAdvancedPanel();
      $('#btnStep1Next').disabled = true;
    }

    // â”€â”€ Advanced Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function openAdvancedPanel() {
      $('#advancedToggle').classList.add('open');
      $('#advancedToggle').setAttribute('aria-expanded', 'true');
      $('#advancedPanel').classList.add('open');
    }

    function closeAdvancedPanel() {
      $('#advancedToggle').classList.remove('open');
      $('#advancedToggle').setAttribute('aria-expanded', 'false');
      $('#advancedPanel').classList.remove('open');
    }

    $('#advancedToggle').addEventListener('click', () => {
      const isOpen = $('#advancedPanel').classList.contains('open');
      if (isOpen) closeAdvancedPanel();
      else openAdvancedPanel();
    });

    // Manual path input
    $('#workspacePathInput').addEventListener('input', (e) => {
      const val = e.target.value.trim();
      if (val.length > 0) {
        state.workspacePath = val;
        state.workspaceDetected = true;
        $('#btnStep1Next').disabled = false;
      } else {
        state.workspaceDetected = false;
        $('#btnStep1Next').disabled = true;
      }
    });

    // Browse button (Electron file dialog)
    $('#btnBrowse').addEventListener('click', () => {
      if (window.electronAPI && window.electronAPI.browseFolder) {
        window.electronAPI.browseFolder().then(path => {
          if (path) {
            $('#workspacePathInput').value = path;
            state.workspacePath = path;
            state.workspaceDetected = true;
            $('#btnStep1Next').disabled = false;
          }
        });
      } else {
        // Fallback: just let them type
        $('#workspacePathInput').focus();
      }
    });

    // â”€â”€ Step 2: API Provider Selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const optionCards = $$('.option-card');
    const apiKeyInput = $('#apiKeyInput');

    function selectOption(optionId) {
      optionCards.forEach(card => {
        card.classList.remove('selected');
        card.setAttribute('aria-pressed', 'false');
      });
      $(`#${optionId}`).classList.add('selected');
      $(`#${optionId}`).setAttribute('aria-pressed', 'true');

      if (optionId === 'optionApiKey') {
        state.aiProvider = 'apiKey';
        state.demoMode = false;
        // Focus the key input
        setTimeout(() => apiKeyInput.focus(), 200);
        validateApiKey();
      } else if (optionId === 'optionOpenClaw') {
        state.aiProvider = 'openclaw';
        state.demoMode = false;
        detectOpenClawConfig();
        $('#btnStep2Next').disabled = false;
      } else if (optionId === 'optionSkip') {
        state.aiProvider = 'skip';
        state.demoMode = true;
        state.providerName = 'Demo Mode';
        $('#btnStep2Next').disabled = false;
      }
    }

    optionCards.forEach(card => {
      card.addEventListener('click', () => selectOption(card.id));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          selectOption(card.id);
        }
      });
    });

    // â”€â”€ API Key Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let apiKeyTimer = null;

    apiKeyInput.addEventListener('input', () => {
      clearTimeout(apiKeyTimer);
      apiKeyTimer = setTimeout(validateApiKey, 300);
    });

    function validateApiKey() {
      const key = apiKeyInput.value.trim();
      const errorEl = $('#apiKeyError');
      const validationEl = $('#apiKeyValidation');
      const providerBadge = $('#apiKeyProviderBadge');

      if (!key) {
        errorEl.classList.remove('visible');
        errorEl.textContent = '';
        validationEl.classList.remove('visible');
        $('#btnStep2Next').disabled = true;
        return;
      }

      let validated = false;
      let provider = '';
      let error = '';

      if (key.startsWith('sk-ant-')) {
        validated = true;
        provider = 'Anthropic (Claude)';
      } else if (key.startsWith('sk-')) {
        validated = true;
        provider = 'OpenAI';
      } else if (key.length > 20) {
        validated = true;
        provider = 'Custom Provider';
      } else {
        validated = false;
        error = "This doesn't look like a valid API key. It usually starts with 'sk-' and is longer than 20 characters.";
      }

      if (validated) {
        errorEl.classList.remove('visible');
        errorEl.textContent = '';
        validationEl.classList.add('visible');
        providerBadge.innerHTML = `<span class="status-badge status-success">âœ… Detected: ${provider}</span>`;
        state.apiKey = key;
        state.providerName = provider;
        $('#btnStep2Next').disabled = false;
      } else {
        errorEl.textContent = error;
        errorEl.classList.add('visible');
        validationEl.classList.remove('visible');
        state.apiKey = null;
        state.providerName = null;
        $('#btnStep2Next').disabled = true;
      }
    }

    // â”€â”€ OpenClaw Config Detection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function detectOpenClawConfig() {
      const detected = $('#openclawDetected');
      const notDetected = $('#openclawNotDetected');

      if (window.electronAPI && window.electronAPI.detectOpenClawConfig) {
        window.electronAPI.detectOpenClawConfig().then(result => {
          if (result && result.found) {
            detected.style.display = 'block';
            notDetected.style.display = 'none';
            state.openclawConfigFound = true;
            state.providerName = 'OpenClaw (Built-in)';
          } else {
            detected.style.display = 'none';
            notDetected.style.display = 'block';
            state.openclawConfigFound = false;
          }
        });
      } else {
        // Simulate detection
        detected.style.display = 'block';
        notDetected.style.display = 'none';
        state.openclawConfigFound = true;
        state.providerName = 'OpenClaw (Built-in)';
      }
    }

    // â”€â”€ Theme Selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const themeCards = $$('.theme-card');

    themeCards.forEach(card => {
      card.addEventListener('click', () => selectTheme(card));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          selectTheme(card);
        }
      });
    });

    function selectTheme(card) {
      themeCards.forEach(c => {
        c.classList.remove('selected');
        c.setAttribute('aria-checked', 'false');
      });
      card.classList.add('selected');
      card.setAttribute('aria-checked', 'true');
      state.theme = card.dataset.theme;
    }

    // â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    $('#btnStep1Next').addEventListener('click', () => showStep(2));
    $('#btnStep2Back').addEventListener('click', () => showStep(1));
    $('#btnStep2Next').addEventListener('click', () => showStep(3));
    $('#btnStep3Back').addEventListener('click', () => showStep(2));
    $('#btnStep3Next').addEventListener('click', () => showStep(4));
    $('#btnStep4Back').addEventListener('click', () => showStep(3));

    // â”€â”€ Skip to Demo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    $('#btnSkipAll').addEventListener('click', () => {
      state.demoMode = true;
      state.aiProvider = 'skip';
      state.providerName = 'Demo Mode';
      state.workspacePath = 'Demo';
      state.workspaceDetected = true;
      showStep(4);
    });

    // â”€â”€ Finish â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    $('#btnFinish').addEventListener('click', () => {
      // Populate summary
      $('#finishWorkspace').textContent = state.workspacePath || 'â€”';
      $('#finishProvider').textContent = state.providerName || 'â€”';

      const themeNames = {
        gameboy: 'ğŸ® GameBoy',
        sims: 'ğŸ  Sims',
        executive: 'ğŸ¢ Executive',
        
      };
      $('#finishTheme').textContent = themeNames[state.theme] || state.theme;

      if (state.demoMode) {
        $('#demoWatermark').classList.add('visible');
      }

      showStep('finish');
    });

    // â”€â”€ Enter Office â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    $('#btnEnterOffice').addEventListener('click', () => {
      const config = {
        workspacePath: state.workspacePath,
        aiProvider: state.aiProvider,
        apiKey: state.apiKey,
        providerName: state.providerName,
        theme: state.theme,
        demoMode: state.demoMode,
        setupComplete: true
      };

      // Send to Electron main process
      if (window.electronAPI && window.electronAPI.completeSetup) {
        window.electronAPI.completeSetup(config);
      } else {
        console.log('Setup complete:', config);
        // For demo: could redirect to office view
        alert('Setup complete! In the real app, this opens your office.');
      }
    });

    // â”€â”€ Keyboard Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.addEventListener('keydown', (e) => {
      // Escape closes advanced panel
      if (e.key === 'Escape' && $('#advancedPanel').classList.contains('open')) {
        closeAdvancedPanel();
      }
    });

    // â”€â”€ Listen for Electron toggle command â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (window.electronAPI && window.electronAPI.onToggleAgents) {
      window.electronAPI.onToggleAgents(() => {
        console.log('Toggle agents command received');
      });
    }

    // â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    detectWorkspace();

  </script>
</body>
</html>