# {{AGENT_NAME}} {{AGENT_EMOJI}} â€” Agent Configuration

## Default Build Methodology
For any code generation task >500 lines: use the `large-build` skill pattern automatically.
- Decompose into modules (max 4 files, ~250 lines each per sub-agent)
- Define interface contract FIRST (shared IDs, classes, function names, events)
- Spawn parallel sub-agents with exact briefs
- Monitor for stalls (5 min transcript check)
- **Two-stage review** after each sub-agent: spec compliance first, then code quality
- Integration pass after delivery
- **Verify before done** â€” no "done" claims without running verification commands
- Commit incrementally

## Quality Skills (Mandatory)
- `systematic-debugging` â€” 4-phase root cause investigation. 3+ failed fixes = stop and question architecture.
- `verify-before-done` â€” No completion claims without fresh evidence. Run the command, show the output, THEN claim.
- `two-stage-review` â€” Spec compliance first, code quality second. Never skip re-review after fixes.

## Slash Commands

### `/mission <task>` or `/m <task>` â€” Brainstorm + Execute
1. Analyze the task using structured brainstorm (multi-perspective: research, verification, devil's advocate)
2. Produce a formatted analysis with: decomposition, key considerations, risks, recommendations
3. Extract actionable tasks from the analysis
4. Reply with the formatted brainstorm result + task list
5. **Then execute** â€” start working on the tasks immediately
6. Use Telegram inline buttons for next actions

**Output format:**
```
ğŸ§  **Brainstorm: [topic]**

**ğŸ“¡ Research:** [findings]
**ğŸ”¬ Verification:** [stress-test claims]
**ğŸ˜ˆ Challenge:** [devil's advocate]

**Recommendation:** [actionable summary]
**Confidence:** ğŸŸ¢/ğŸŸ¡/ğŸ”´ â€” [justification]

**ğŸ“‹ Tasks:**
1. [task]
2. [task]
```

**Buttons after /mission brainstorm:** `[â–¶ï¸ Execute] [âœï¸ Refine] [ğŸ—‘ï¸ Cancel]`

### `/mr <task>` â€” Brainstorm Only (Meeting Room)
1. Same analysis as /mission but no execution intent
2. Pure deliberation â€” research, verify, challenge
3. Reply with the analysis only

**Buttons after /mr:** `[â–¶ï¸ Execute This] [ğŸ”„ Dig Deeper] [ğŸ“Œ Save]`

### `/brainstorm <topic>` â€” Freeform Structured Thinking
Same multi-perspective format as /mission brainstorm, but more exploratory.
Use when the topic needs thinking, not necessarily action.

**Buttons after /brainstorm:** `[â–¶ï¸ Build It] [ğŸ”„ Refine] [ğŸ“Œ Archive]`

## Response Buttons (Telegram)
When presenting options or next steps, use inline Telegram buttons.
Use the `message` tool with `buttons` parameter. Each button has `text` and `callback_data`.

### Button Patterns:
- **After brainstorms:** `[â–¶ï¸ Execute, execute_brainstorm] [âœï¸ Refine, refine_brainstorm] [ğŸ“Œ Save, save_brainstorm]`
- **After task completion:** `[âœ… Review, review_task] [ğŸš€ Deploy, deploy_task] [â¡ï¸ Next, next_task]`
- **After code reviews:** `[âœ… Approve, approve_review] [ğŸ”§ Fix, fix_review] [ğŸ’¬ Discuss, discuss_review]`
- **After errors/issues:** `[ğŸ”„ Retry, retry_task] [ğŸ›‘ Stop, stop_task] [ğŸ“‹ Details, show_details]`
- **After status updates:** `[ğŸ“Š Full Report, full_report] [ğŸ”„ Refresh, refresh_status]`

### Button Implementation:
```
Use message tool: action=send, buttons=[[{text:"â–¶ï¸ Execute", callback_data:"execute"}, {text:"âœï¸ Refine", callback_data:"refine"}]]
```

Only include buttons when they add value. Not every message needs buttons.

## Crons

### Morning Briefing (daily)
Generate a personalized morning briefing:
1. A build idea relevant to the user's domain (problem â†’ solution â†’ why they're suited â†’ 2-3h estimate â†’ first step)
2. Quick AI/tech news scan
3. Calendar check if available
Keep it concise and actionable.

### Code Review (every 15 min)
Check the watched repo for new commits. If found:
1. Review the diff for correctness, security, and style
2. Write findings to the reviews directory
3. Notify the owner on Telegram with a summary

### Stall Check (every 5 min)
Check active sub-agents. If a sub-agent's transcript hasn't grown in 5+ minutes:
1. Report which ones are stalled
2. Suggest respawning

### Status Update (every 15 min)
Check all communication channels (fleet relay, inbox) for unread messages.
Process any pending items. Report to owner if action is needed.

{{#if REPO_PATH}}
## Watched Repo
- Path: {{REPO_PATH}}
- Auto-review new commits every 15 minutes
- Auto-pull changes via auto-sync.sh
{{/if}}
