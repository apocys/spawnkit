<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpawnKit â€” Executive Office</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SpawnKit Executive Office v3 â€” Apple Ã— Linear Ã— Raycast
           Premium light-mode AI workspace. SS+ quality.
           SVG Avatars + Hierarchy View + Agent TODO Panel
           ENHANCED WITH: Real API data, CEO status, cron timers, etc.
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        :root {
            /* â”€â”€ Executive Palette â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --exec-blue: #007AFF;
            --exec-blue-hover: #0A84FF;
            --exec-blue-muted: rgba(0, 122, 255, 0.15);
            --exec-blue-glow: rgba(0, 122, 255, 0.3);
            --exec-white: #FFFFFF;
            --exec-gray-50: #F5F5F7;
            --exec-gray-100: #E5E5EA;
            --exec-gray-200: #C7C7CC;
            --exec-gray-300: #AEAEB2;
            --exec-gray-400: #8E8E93;
            --exec-gray-500: #636366;
            --exec-gray-600: #48484A;
            --exec-gray-700: #3A3A3C;
            --exec-gray-800: #2C2C2E;
            --exec-gray-900: #1C1C1E;
            --exec-black: #000000;

            /* â”€â”€ CEO Special Colors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --ceo-gold: #FFD700;
            --ceo-gold-muted: rgba(255, 215, 0, 0.15);
            --ceo-border: linear-gradient(135deg, #FFD700, #FFA500);

            /* â”€â”€ Semantic Colors (Light Mode Default) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --bg-primary: #F5F5F7;
            --bg-secondary: var(--exec-white);
            --bg-tertiary: var(--exec-gray-50);
            --bg-room: rgba(255, 255, 255, 0.85);
            --bg-room-hover: rgba(255, 255, 255, 0.95);
            --bg-frosted: rgba(255, 255, 255, 0.72);
            --text-primary: var(--exec-gray-900);
            --text-secondary: var(--exec-gray-600);
            --text-tertiary: var(--exec-gray-500);
            --border-subtle: rgba(0, 0, 0, 0.06);
            --border-medium: rgba(0, 0, 0, 0.1);
            --border-strong: rgba(0, 0, 0, 0.16);

            /* â”€â”€ Status Colors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --status-active: #30D158;
            --status-busy: #FFD60A;
            --status-idle: var(--exec-gray-500);
            --status-error: #FF453A;
            --status-disconnected: #FF9500;

            /* â”€â”€ Agent Brand Colors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --color-ceo: var(--exec-blue);
            --color-atlas: #BF5AF2;
            --color-forge: #FF9F0A;
            --color-hunter: #FF453A;
            --color-echo: #0A84FF;
            --color-sentinel: #30D158;

            /* â”€â”€ Typography â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

            /* â”€â”€ Animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --ease-smooth: cubic-bezier(0.2, 0.8, 0.2, 1);
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-out: cubic-bezier(0, 0, 0.2, 1);

            /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            --room-radius: 16px;
            --panel-width: 380px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Reset & Base
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: var(--font-family);
            background: var(--bg-primary);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ambient Background â€” Subtle Grain + Gradient
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .exec-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 122, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(48, 209, 88, 0.02) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(191, 90, 242, 0.02) 0%, transparent 50%),
                var(--bg-primary);
        }

        .exec-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .exec-particle {
            position: absolute;
            width: 1px;
            height: 1px;
            background: rgba(0, 122, 255, 0.1);
            border-radius: 50%;
            animation: particleFloat 20s infinite linear;
        }

        .exec-particle:nth-child(1) {
            left: 20%;
            animation-delay: -5s;
            animation-duration: 25s;
        }

        .exec-particle:nth-child(2) {
            left: 60%;
            animation-delay: -10s;
            animation-duration: 30s;
            background: rgba(48, 209, 88, 0.08);
        }

        .exec-particle:nth-child(3) {
            left: 80%;
            animation-delay: -15s;
            animation-duration: 35s;
            background: rgba(191, 90, 242, 0.08);
        }

        @keyframes particleFloat {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) translateX(10px); opacity: 0; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CEO Special Styling
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ceo-crown {
            display: inline-block;
            font-size: 14px;
            margin-right: 4px;
            filter: drop-shadow(0 1px 2px rgba(255, 215, 0, 0.3));
        }

        .ceo-border {
            background: var(--ceo-border);
            padding: 2px;
            border-radius: inherit;
        }

        .ceo-border .org-card,
        .ceo-border .exec-room {
            background: var(--bg-secondary);
            border-radius: calc(var(--room-radius) - 2px);
        }

        .agent-status-dot--ceo {
            background: var(--ceo-gold);
            box-shadow: 0 0 8px var(--ceo-gold);
            animation: ceoPulse 2s ease-in-out infinite;
        }

        @keyframes ceoPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.9; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Connection Status Indicator
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .connection-status {
            position: fixed;
            top: 16px;
            right: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--bg-frosted);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
            z-index: 1000;
            transition: all 0.2s var(--ease-smooth);
        }

        .connection-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--status-active);
            transition: background-color 0.2s;
        }

        .connection-status.disconnected .connection-dot {
            background: var(--status-disconnected);
            animation: disconnectedPulse 1s ease-in-out infinite;
        }

        .connection-status.error .connection-dot {
            background: var(--status-error);
        }

        @keyframes disconnectedPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Countdown Timer Styling
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .cron-countdown {
            font-size: 11px;
            color: var(--status-busy);
            font-weight: 600;
            margin-top: 4px;
            font-family: 'SF Mono', 'Monaco', 'Cascadia Code', monospace;
        }

        .cron-tile {
            cursor: pointer;
            transition: all 0.2s var(--ease-smooth);
        }

        .cron-tile:hover {
            background: var(--bg-room-hover);
            transform: translateY(-1px);
        }

        .cron-tile.expanded {
            background: var(--exec-blue-muted);
            border-color: var(--exec-blue);
        }

        .cron-details {
            margin-top: 8px;
            padding: 8px 0;
            border-top: 1px solid var(--border-subtle);
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Main Container â€” Premium Viewport
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .exec-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: transparent;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Executive Navigation â€” Refined Tab Design
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .exec-nav {
            display: flex;
            align-items: center;
            padding: 20px 24px 16px;
            background: var(--bg-frosted);
            border-bottom: 1px solid var(--border-subtle);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .nav-toggle-group {
            display: flex;
            gap: 2px;
            background: var(--bg-tertiary);
            padding: 4px;
            border-radius: 10px;
            border: 1px solid var(--border-subtle);
        }

        .nav-toggle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: transparent;
            color: var(--text-secondary);
            font-family: var(--font-family);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s var(--ease-smooth);
            white-space: nowrap;
        }

        .nav-toggle-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .nav-toggle-btn.active {
            background: var(--exec-blue);
            color: white;
            box-shadow: 0 2px 8px rgba(0, 122, 255, 0.25);
        }

        .nav-toggle-icon {
            font-size: 16px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Content Area
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .exec-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .exec-content::-webkit-scrollbar {
            display: none;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Fleet Grid â€” Premium Card Design
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .exec-fleet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .exec-room {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 160px;
            padding: 24px;
            background: var(--bg-room);
            border: 1px solid var(--border-subtle);
            border-radius: var(--room-radius);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.25s var(--ease-smooth);
            text-align: center;
            outline: none;
        }

        .exec-room:hover,
        .exec-room:focus-visible {
            background: var(--bg-room-hover);
            border-color: var(--border-medium);
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.08),
                0 3px 8px rgba(0, 0, 0, 0.06);
        }

        .exec-room:focus-visible {
            border-color: var(--exec-blue);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.08),
                0 3px 8px rgba(0, 0, 0, 0.06),
                0 0 0 3px var(--exec-blue-glow);
        }

        .exec-room--ceo {
            background: var(--ceo-gold-muted);
            border: 2px solid var(--ceo-gold);
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.15);
        }

        .exec-room--ceo:hover,
        .exec-room--ceo:focus-visible {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 215, 0, 0.25);
        }

        .exec-room-label {
            position: absolute;
            top: 16px;
            left: 16px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-tertiary);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .agent-avatar {
            position: relative;
            width: 48px;
            height: 48px;
            margin-bottom: 12px;
        }

        .agent-avatar svg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .agent-avatar--lg {
            width: 64px;
            height: 64px;
            margin-bottom: 16px;
        }

        .agent-status-dot {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 12px;
            height: 12px;
            border: 2px solid var(--bg-secondary);
            border-radius: 50%;
            background: var(--status-idle);
        }

        .agent-status-dot--active {
            background: var(--status-active);
            animation: statusPulse 2.5s ease-in-out infinite;
        }

        .agent-status-dot--busy {
            background: var(--status-busy);
        }

        .agent-status-dot--error {
            background: var(--status-error);
        }

        @keyframes statusPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.15); opacity: 0.8; }
        }

        .agent-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .agent-role {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           View Toggle â€” Grid vs Hierarchy
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .view-toggle {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .view-toggle-group {
            display: flex;
            gap: 2px;
            background: var(--bg-tertiary);
            padding: 4px;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
        }

        .view-toggle-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            background: transparent;
            color: var(--text-secondary);
            font-family: var(--font-family);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s var(--ease-smooth);
        }

        .view-toggle-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .view-toggle-btn.active {
            background: var(--exec-blue);
            color: white;
            box-shadow: 0 1px 3px rgba(0, 122, 255, 0.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Hierarchy View â€” Org Chart
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .org-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .org-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 32px;
        }

        .org-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px 24px;
            background: var(--bg-room);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s var(--ease-smooth);
            min-width: 240px;
            outline: none;
        }

        .org-card:hover,
        .org-card:focus-visible {
            background: var(--bg-room-hover);
            border-color: var(--border-medium);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .org-card:focus-visible {
            border-color: var(--exec-blue);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.1),
                0 0 0 3px var(--exec-blue-glow);
        }

        .org-card--ceo {
            background: var(--ceo-gold-muted);
            border: 2px solid var(--ceo-gold);
            box-shadow: 0 4px 16px rgba(255, 215, 0, 0.15);
        }

        .org-card--ceo:hover,
        .org-card--ceo:focus-visible {
            box-shadow: 0 8px 24px rgba(255, 215, 0, 0.25);
        }

        .org-card-info {
            flex: 1;
        }

        .org-connector {
            width: 2px;
            height: 24px;
            background: var(--border-medium);
            margin: 8px 0;
        }

        .org-children {
            display: flex;
            gap: 32px;
            position: relative;
        }

        .org-children::before {
            content: '';
            position: absolute;
            top: -16px;
            left: calc(var(--bar-half-width, 150px) * -1);
            right: calc(var(--bar-half-width, 150px) * -1);
            height: 2px;
            background: var(--border-medium);
        }

        .org-child {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .org-connector--branch {
            width: 2px;
            height: 16px;
            background: var(--border-medium);
            margin-bottom: 16px;
        }

        /* Sub-agents display */
        .org-sub-level {
            margin-top: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .org-sub-children {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 300px;
        }

        .org-sub-card {
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            text-align: center;
            min-width: 80px;
        }

        .sub-agent-name {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .sub-agent-role {
            font-size: 10px;
            color: var(--text-tertiary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Overlays and Panels
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        /* Detail Panel (Agent Details) */
        .detail-overlay {
            position: fixed;
            inset: 0;
            z-index: 200;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s var(--ease-smooth);
        }
        .detail-overlay.open {
            pointer-events: auto;
            opacity: 1;
        }
        .detail-overlay.open .detail-backdrop { opacity: 1; }
        .detail-overlay.open .detail-panel { transform: translateX(0); }
        .detail-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.5);
            opacity: 0;
            transition: opacity 0.35s var(--ease-smooth);
        }
        .detail-panel {
            position: absolute;
            top: 0; right: 0;
            width: 420px;
            max-width: 90vw;
            height: 100%;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-medium);
            display: flex;
            flex-direction: column;
            transform: translateX(100%);
            transition: transform 0.4s var(--ease-smooth);
            box-shadow: -16px 0 48px rgba(0,0,0,0.12);
        }
        .detail-hero {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 24px 24px 20px;
            border-bottom: 1px solid var(--border-subtle);
        }
        .detail-hero-avatar {
            width: 64px; height: 64px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
            position: relative;
        }
        .detail-hero-avatar svg { width: 100%; height: 100%; display: block; }
        .detail-hero-status {
            position: absolute; bottom: 2px; right: 2px;
            width: 14px; height: 14px; border-radius: 50%;
            border: 2.5px solid var(--bg-secondary);
            z-index: 2;
        }
        .detail-hero-info { flex: 1; min-width: 0; }
        .detail-hero-name { 
            font-size: 18px; 
            font-weight: 700; 
            color: var(--text-primary); 
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .detail-hero-role { font-size: 13px; color: var(--text-tertiary); font-weight: 500; }
        .detail-hero-task {
            font-size: 12px; color: var(--exec-blue);
            margin-top: 4px; font-weight: 500;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .detail-close {
            width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            border: none; background: var(--bg-tertiary); color: var(--text-secondary);
            border-radius: 8px; cursor: pointer; font-size: 16px;
            transition: all 0.2s var(--ease-smooth); font-family: inherit;
            flex-shrink: 0;
        }
        .detail-close:hover { background: var(--exec-gray-100); color: var(--text-primary); }
        .detail-body {
            flex: 1; overflow-y: auto; padding: 0;
            scrollbar-width: thin; scrollbar-color: var(--exec-gray-300) transparent;
        }
        .detail-body::-webkit-scrollbar { width: 4px; }
        .detail-body::-webkit-scrollbar-thumb { background: var(--exec-gray-300); border-radius: 2px; }
        .detail-section {
            padding: 18px 24px;
            border-bottom: 1px solid var(--border-subtle);
        }
        .detail-section:last-child { border-bottom: none; }
        .detail-section-title {
            font-size: 11px; font-weight: 600; color: var(--text-tertiary);
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px;
        }
        .detail-metrics {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
        }
        .detail-metric {
            padding: 10px 12px; background: var(--bg-tertiary);
            border-radius: 10px;
        }
        .detail-metric-value {
            font-size: 16px; font-weight: 700; color: var(--text-primary);
        }
        .detail-metric-label {
            font-size: 11px; color: var(--text-tertiary); margin-top: 2px;
        }
        .detail-skill-chips {
            display: flex; flex-wrap: wrap; gap: 8px;
        }
        .detail-skill-chip {
            display: inline-flex; align-items: center; gap: 5px;
            padding: 5px 12px; background: var(--exec-blue-muted);
            border-radius: 20px; font-size: 12px; font-weight: 500;
            color: var(--exec-blue);
        }

        /* Sessions Panel Styling */
        .exec-sessions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
            padding: 20px 0;
        }

        .session-card {
            background: var(--bg-room);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.2s var(--ease-smooth);
            cursor: pointer;
        }

        .session-card:hover {
            background: var(--bg-room-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .session-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .session-emoji {
            font-size: 24px;
        }

        .session-info {
            flex: 1;
        }

        .session-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .session-schedule {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .session-status {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .session-status--active {
            background: rgba(48, 209, 88, 0.15);
            color: #30D158;
        }

        .session-status--disabled {
            background: rgba(142, 142, 147, 0.15);
            color: #8E8E93;
        }

        /* Mission System Styling */
        .missions-overview {
            margin-top: 20px;
        }

        .mission-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s var(--ease-smooth);
        }

        .mission-card:hover {
            background: var(--bg-room);
            border-color: var(--exec-blue);
        }

        .mission-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .mission-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .mission-priority {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .mission-priority--high {
            background: rgba(255, 69, 58, 0.15);
            color: #FF453A;
        }

        .mission-priority--medium {
            background: rgba(255, 214, 10, 0.15);
            color: #B89B00;
        }

        .mission-priority--low {
            background: rgba(48, 209, 88, 0.15);
            color: #30D158;
        }

        .mission-agents {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }

        .mission-agent-chip {
            padding: 2px 8px;
            background: var(--exec-blue-muted);
            color: var(--exec-blue);
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
        }

        /* Skill Center Styling */
        .skill-categories {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .skill-category {
            background: var(--bg-room);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 16px;
        }

        .skill-category-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .skill-category-icon {
            font-size: 20px;
        }

        .skill-category-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .skill-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .skill-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .skill-name {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .skill-add-btn {
            padding: 4px 8px;
            background: var(--exec-blue);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s var(--ease-smooth);
        }

        .skill-add-btn:hover {
            background: var(--exec-blue-hover);
        }

        /* Toast Notifications */
        .exec-toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            padding: 10px 20px;
            background: var(--exec-gray-900);
            color: white;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            z-index: 999;
            opacity: 0;
            transition: all 0.3s var(--ease-smooth);
            pointer-events: none;
            box-shadow: 0 8px 24px rgba(0,0,0,0.25);
        }

        .exec-toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Add Agent Wizard Styles */
        .wizard-overlay {
            position: fixed;
            inset: 0;
            z-index: 300;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s var(--ease-smooth);
        }

        .wizard-overlay.open {
            pointer-events: auto;
            opacity: 1;
        }

        .wizard-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            opacity: 0;
            transition: opacity 0.35s var(--ease-smooth);
        }

        .wizard-overlay.open .wizard-backdrop {
            opacity: 1;
        }

        .wizard-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateY(20px);
            width: 480px;
            max-width: 90vw;
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border-medium);
            display: flex;
            flex-direction: column;
            transition: transform 0.4s var(--ease-smooth);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        .wizard-overlay.open .wizard-modal {
            transform: translate(-50%, -50%);
        }

        .wizard-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .wizard-title {
            font-size: 17px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .wizard-close {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s var(--ease-smooth);
        }

        .wizard-close:hover {
            background: var(--exec-gray-100);
            color: var(--text-primary);
        }

        .wizard-body {
            padding: 24px;
        }

        .wizard-progress {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }

        .wizard-step {
            flex: 1;
            height: 4px;
            border-radius: 2px;
            background: var(--exec-gray-200);
            transition: all 0.3s var(--ease-smooth);
        }

        .wizard-step.active,
        .wizard-step.completed {
            background: var(--exec-blue);
        }

        .wizard-role-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .wizard-role-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            background: var(--bg-tertiary);
            cursor: pointer;
            transition: all 0.2s var(--ease-smooth);
        }

        .wizard-role-btn:hover {
            background: var(--bg-room);
            border-color: var(--exec-blue);
        }

        .wizard-role-btn.selected {
            background: var(--exec-blue-muted);
            border-color: var(--exec-blue);
        }

        .wizard-role-emoji {
            font-size: 20px;
        }

        .wizard-role-info {
            flex: 1;
        }

        .wizard-role-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .wizard-role-desc {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .wizard-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .wizard-btn {
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s var(--ease-smooth);
        }

        .wizard-btn--primary {
            background: var(--exec-blue);
            color: white;
            border: none;
            flex: 2;
        }

        .wizard-btn--primary:hover {
            background: var(--exec-blue-hover);
        }

        .wizard-btn--secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-medium);
            flex: 1;
        }

        .wizard-btn--secondary:hover {
            background: var(--bg-tertiary);
        }

        .wizard-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-medium);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-family: var(--font-family);
            font-size: 14px;
            outline: none;
            transition: all 0.2s var(--ease-smooth);
        }

        .wizard-input:focus {
            border-color: var(--exec-blue);
            box-shadow: 0 0 0 3px var(--exec-blue-muted);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .exec-fleet-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 16px;
                padding: 16px;
            }

            .exec-room {
                height: 140px;
                padding: 20px;
            }

            .agent-avatar--lg {
                width: 56px;
                height: 56px;
            }

            .detail-panel,
            .wizard-modal {
                width: 100vw;
                max-width: 100vw;
                height: 100vh;
                border-radius: 0;
                transform: translateX(100%);
            }

            .wizard-overlay.open .wizard-modal {
                transform: translateX(0);
            }

            .org-children {
                flex-direction: column;
                gap: 16px;
            }

            .org-card {
                min-width: 200px;
                padding: 16px 20px;
            }
        }

        @media (max-width: 480px) {
            .exec-content {
                padding: 16px;
            }

            .exec-fleet-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .nav-toggle-group {
                width: 100%;
                justify-content: center;
            }

            .nav-toggle-btn {
                flex: 1;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- â•â•â• Ambient Background â•â•â• -->
    <div class="exec-backdrop" aria-hidden="true"></div>
    <div class="exec-particles" aria-hidden="true">
        <div class="exec-particle"></div>
        <div class="exec-particle"></div>
        <div class="exec-particle"></div>
    </div>

    <!-- â•â•â• Connection Status Indicator â•â•â• -->
    <div id="connectionStatus" class="connection-status">
        <div class="connection-dot"></div>
        <span class="connection-text">Connecting...</span>
    </div>

    <!-- â•â•â• SVG Avatar Definitions â•â•â• -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
        <defs>
            <!-- â”€â”€ ApoMac: Tech CEO with glasses â”€â”€ -->
            <symbol id="avatar-ceo" viewBox="0 0 48 48">
                <circle cx="24" cy="24" r="24" fill="#007AFF"/>
                <circle cx="24" cy="20" r="10" fill="#F5D6B8"/>
                <path d="M14 42c0-8 4.5-14 10-14s10 6 10 14" fill="#1C1C1E"/>
                <!-- Hair -->
                <path d="M14 17c0-6 4.5-11 10-11s10 5 10 11c0 1-.2 2-.5 2.8-.8-4-4.5-7-9.5-7s-8.7 3-9.5 7c-.3-.8-.5-1.8-.5-2.8z" fill="#3A3A3C"/>
                <!-- Glasses -->
                <rect x="15.5" y="17.5" width="7" height="5.5" rx="2.5" fill="none" stroke="#1C1C1E" stroke-width="1.5"/>
                <rect x="25.5" y="17.5" width="7" height="5.5" rx="2.5" fill="none" stroke="#1C1C1E" stroke-width="1.5"/>
                <line x1="22.5" y1="20" x2="25.5" y2="20" stroke="#1C1C1E" stroke-width="1.2"/>
                <!-- Eyes behind glasses -->
                <circle cx="19" cy="20.2" r="1.2" fill="#1C1C1E"/>
                <circle cx="29" cy="20.2" r="1.2" fill="#1C1C1E"/>
                <!-- Smile -->
                <path d="M20 24.5c0 0 2 2.5 4 2.5s4-2.5 4-2.5" fill="none" stroke="#C4856A" stroke-width="1" stroke-linecap="round"/>
            </symbol>

            <!-- â”€â”€ Atlas: Operations Manager with wrench â”€â”€ -->
            <symbol id="avatar-atlas" viewBox="0 0 48 48">
                <circle cx="24" cy="24" r="24" fill="#BF5AF2"/>
                <circle cx="24" cy="20" r="9" fill="#F5D6B8"/>
                <path d="M15 40c0-7 4-12 9-12s9 5 9 12" fill="#1C1C1E"/>
                <!-- Hair -->
                <path d="M15 16c0-5 4-9 9-9s9 4 9 9c0 1-.3 2-.7 2.8-.6-3.5-3.8-6-7.3-6s-6.7 2.5-7.3 6c-.4-.8-.7-1.8-.7-2.8z" fill="#8E4EC6"/>
                <!-- Eyes -->
                <circle cx="20" cy="19" r="1.5" fill="#1C1C1E"/>
                <circle cx="28" cy="19" r="1.5" fill="#1C1C1E"/>
                <!-- Smile -->
                <path d="M19 24c0 0 2.5 3 5 3s5-3 5-3" fill="none" stroke="#C4856A" stroke-width="1.2" stroke-linecap="round"/>
                <!-- Wrench tool -->
                <path d="M32 38l-3-3 2-2 3 3-2 2z" fill="#FFD700" stroke="#E6C200" stroke-width="0.5"/>
            </symbol>

            <!-- â”€â”€ Forge: Technical Builder with hard hat â”€â”€ -->
            <symbol id="avatar-forge" viewBox="0 0 48 48">
                <circle cx="24" cy="24" r="24" fill="#FF9F0A"/>
                <circle cx="24" cy="21" r="9" fill="#F5D6B8"/>
                <path d="M15 42c0-8 4-13 9-13s9 5 9 13" fill="#1C1C1E"/>
                <!-- Hard hat -->
                <ellipse cx="24" cy="14" rx="10" ry="4" fill="#FFD700"/>
                <ellipse cx="24" cy="12" rx="8" ry="3" fill="#FF9F0A"/>
                <!-- Eyes -->
                <circle cx="20" cy="20" r="1.5" fill="#1C1C1E"/>
                <circle cx="28" cy="20" r="1.5" fill="#1C1C1E"/>
                <!-- Smile -->
                <path d="M19 25c0 0 2.5 2.5 5 2.5s5-2.5 5-2.5" fill="none" stroke="#C4856A" stroke-width="1" stroke-linecap="round"/>
                <!-- Tool belt -->
                <rect x="18" y="35" width="12" height="3" fill="#8B4513"/>
            </symbol>

            <!-- â”€â”€ Hunter: Sales Hunter with target â”€â”€ -->
            <symbol id="avatar-hunter" viewBox="0 0 48 48">
                <circle cx="24" cy="24" r="24" fill="#FF453A"/>
                <circle cx="24" cy="20" r="9" fill="#F5D6B8"/>
                <path d="M15 40c0-7 4-12 9-12s9 5 9 12" fill="#1C1C1E"/>
                <!-- Hair (spiky) -->
                <path d="M15 15c1-6 4.5-10 9-10s8 4 9 10l-2-1c-1-3-3-5-7-5s-6 2-7 5l-2 1z" fill="#D2001C"/>
                <!-- Eyes (determined) -->
                <circle cx="20" cy="19" r="1.5" fill="#1C1C1E"/>
                <circle cx="28" cy="19" r="1.5" fill="#1C1C1E"/>
                <!-- Smile (confident) -->
                <path d="M19 24c0 0 2.5 3 5 3s5-3 5-3" fill="none" stroke="#C4856A" stroke-width="1.2" stroke-linecap="round"/>
                <!-- Target badge -->
                <circle cx="38" cy="10" r="5" fill="#FFD700"/>
                <circle cx="38" cy="10" r="3" fill="#FF453A"/>
                <circle cx="38" cy="10" r="1" fill="#FFD700"/>
            </symbol>

            <!-- â”€â”€ Echo: Marketing Voice with megaphone â”€â”€ -->
            <symbol id="avatar-echo" viewBox="0 0 48 48">
                <circle cx="24" cy="24" r="24" fill="#0A84FF"/>
                <circle cx="24" cy="20" r="9" fill="#F5D6B8"/>
                <path d="M15 40c0-7 4-12 9-12s9 5 9 12" fill="#1C1C1E"/>
                <!-- Hair (flowing) -->
                <path d="M15 16c0-6 4-10 9-10s9 4 9 10c-1-4-4-7-9-7s-8 3-9 7z" fill="#FFD700"/>
                <!-- Eyes (expressive) -->
                <circle cx="20" cy="19" r="1.5" fill="#1C1C1E"/>
                <circle cx="28" cy="19" r="1.5" fill="#1C1C1E"/>
                <!-- Smile (bright) -->
                <path d="M18 24c0 0 3 4 6 4s6-4 6-4" fill="none" stroke="#C4856A" stroke-width="1.3" stroke-linecap="round"/>
                <!-- Megaphone -->
                <path d="M35 35l5 2v4l-5 2-3-4z" fill="#FFD700" stroke="#E6C200" stroke-width="0.5"/>
                <circle cx="32" cy="39" r="1.5" fill="#0A84FF"/>
            </symbol>

            <!-- â”€â”€ Sentinel: Guardian with shield â”€â”€ -->
            <symbol id="avatar-sentinel" viewBox="0 0 48 48">
                <circle cx="24" cy="24" r="24" fill="#30D158"/>
                <circle cx="24" cy="20" r="9" fill="#F5D6B8"/>
                <path d="M15 40c0-7 4-12 9-12s9 5 9 12" fill="#1C1C1E"/>
                <!-- Hair (neat) -->
                <path d="M15 15c0-5 4.5-9 9-9s9 4 9 9c-0.5-3.5-4-6-9-6s-8.5 2.5-9 6z" fill="#2D5016"/>
                <!-- Eyes (alert) -->
                <circle cx="20" cy="19" r="1.5" fill="#1C1C1E"/>
                <circle cx="28" cy="19" r="1.5" fill="#1C1C1E"/>
                <!-- Smile (protective) -->
                <path d="M19 24c0 0 2.5 2.5 5 2.5s5-2.5 5-2.5" fill="none" stroke="#C4856A" stroke-width="1" stroke-linecap="round"/>
                <!-- Shield badge -->
                <path d="M36 8l4 2v6l-4 4-4-4v-6l4-2z" fill="#FFD700" stroke="#30D158" stroke-width="1"/>
                <path d="M36 10v6l-2 2v-6l2-2z" fill="#30D158"/>
            </symbol>
        </defs>
    </svg>

    <!-- â•â•â• Main Application Container â•â•â• -->
    <div class="exec-container">
        <!-- Navigation -->
        <nav class="exec-nav">
            <div class="nav-toggle-group">
                <button class="nav-toggle-btn active" data-view="fleet">
                    <span class="nav-toggle-icon">ğŸ¢</span>
                    <span>Fleet</span>
                </button>
                <button class="nav-toggle-btn" data-view="sessions">
                    <span class="nav-toggle-icon">âš™ï¸</span>
                    <span>Sessions</span>
                </button>
                <button class="nav-toggle-btn" data-view="skills">
                    <span class="nav-toggle-icon">ğŸ¯</span>
                    <span>Skills</span>
                </button>
            </div>
        </nav>

        <!-- Content Area -->
        <div class="exec-content">
            <!-- Fleet View -->
            <div id="fleetView" class="view-panel active">
                <!-- View Toggle -->
                <div class="view-toggle">
                    <div class="view-toggle-group">
                        <button class="view-toggle-btn active" data-toggle="grid">
                            <span>âŠ</span> Grid
                        </button>
                        <button class="view-toggle-btn" data-toggle="hierarchy">
                            <span>âŠ¡</span> Hierarchy
                        </button>
                    </div>
                </div>

                <!-- Grid View -->
                <div id="gridView" class="exec-fleet-grid">
                    <!-- Agent cards will be populated here -->
                </div>

                <!-- Hierarchy View -->
                <div id="hierarchyView" class="org-tree" style="display: none;">
                    <!-- Org chart will be populated here -->
                </div>
            </div>

            <!-- Sessions View -->
            <div id="sessionsView" class="view-panel">
                <div class="exec-sessions" id="sessionsList">
                    <!-- Sessions will be populated here -->
                </div>
            </div>

            <!-- Skills View -->
            <div id="skillsView" class="view-panel">
                <div class="skill-categories" id="skillCategories">
                    <!-- Skills will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â• Detail Panel Overlay â•â•â• -->
    <div id="detailOverlay" class="detail-overlay">
        <div class="detail-backdrop"></div>
        <div class="detail-panel">
            <div class="detail-hero">
                <div class="detail-hero-avatar">
                    <svg><use id="detailAvatarIcon" href="#avatar-ceo"/></svg>
                    <div id="detailHeroStatus" class="detail-hero-status agent-status-dot--active"></div>
                </div>
                <div class="detail-hero-info">
                    <div id="detailHeroName" class="detail-hero-name">Agent Name</div>
                    <div id="detailHeroRole" class="detail-hero-role">Role</div>
                    <div id="detailHeroTask" class="detail-hero-task">Current Task</div>
                </div>
                <button id="detailClose" class="detail-close">âœ•</button>
            </div>
            <div class="detail-body" id="detailBody">
                <!-- Content populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- â•â•â• Add Agent Wizard â•â•â• -->
    <div id="addAgentOverlay" class="wizard-overlay">
        <div class="wizard-backdrop"></div>
        <div class="wizard-modal">
            <div class="wizard-header">
                <div class="wizard-title">Add New Agent</div>
                <button id="wizardClose" class="wizard-close">âœ•</button>
            </div>
            <div class="wizard-body" id="addAgentBody">
                <!-- Wizard content populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- â•â•â• Toast Container â•â•â• -->
    <div id="toastContainer"></div>

    <!-- Auto-detect local OpenClaw gateway -->
    <script>
      (function() {
        var stored = {};
        try { stored = JSON.parse(localStorage.getItem('spawnkit-config') || '{}'); } catch(e) {}
        
        // Priority: localStorage config > URL params > defaults
        var params = new URLSearchParams(window.location.search);
        var relayUrl = stored.relayUrl || params.get('relay') || 'http://127.0.0.1:8222';
        var relayToken = stored.relayToken || params.get('token') || '';
        
        window.OC_RELAY_URL = relayUrl;
        if (relayToken) window.OC_RELAY_TOKEN = relayToken;
        
        console.log('ğŸ”Œ SpawnKit Enhanced: relay=' + relayUrl + ' token=' + (relayToken ? '***' : 'none'));
      })();
    </script>

    <script>
    (function() {
        'use strict';
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Enhanced Configuration & Real Data Integration
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        // Get user's setup config for personalization
        var setupConfig = {};
        try {
            setupConfig = JSON.parse(localStorage.getItem('spawnkit-config') || '{}');
        } catch(e) {}

        // API Configuration
        var API_BASE = window.OC_RELAY_URL || 'http://127.0.0.1:8222';
        var API_TOKEN = window.OC_RELAY_TOKEN || '';
        var REFRESH_INTERVAL = 30000; // 30 seconds
        var isOnline = false;
        var lastRefreshTime = 0;

        // Data stores
        var agentsData = [];
        var sessionsData = [];
        var cronsData = [];
        var configData = null;
        var memoryData = null;

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           API Data Fetching
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        async function fetchAPI(endpoint) {
            try {
                const headers = { 'Accept': 'application/json' };
                if (API_TOKEN) headers['Authorization'] = 'Bearer ' + API_TOKEN;
                
                const response = await fetch(API_BASE + endpoint, { 
                    headers: headers, 
                    mode: 'cors',
                    timeout: 5000 
                });
                
                if (!response.ok) {
                    console.warn('API fetch failed:', endpoint, response.status);
                    return null;
                }
                
                return await response.json();
            } catch (error) {
                console.error('API fetch error:', endpoint, error.message);
                return null;
            }
        }

        async function refreshAllData() {
            console.log('ğŸ”„ Refreshing data from API...');
            const startTime = Date.now();
            
            try {
                const [sessions, crons, agents, config, memory] = await Promise.all([
                    fetchAPI('/api/oc/sessions'),
                    fetchAPI('/api/oc/crons'),
                    fetchAPI('/api/oc/agents'),
                    fetchAPI('/api/oc/config'),
                    fetchAPI('/api/oc/memory')
                ]);

                // Update connection status
                const wasOnline = isOnline;
                isOnline = !!(sessions || crons || agents);
                
                if (isOnline !== wasOnline) {
                    updateConnectionStatus();
                }

                if (isOnline) {
                    // Update data stores
                    if (sessions) sessionsData = Array.isArray(sessions) ? sessions : [];
                    if (crons && crons.jobs) cronsData = crons.jobs;
                    if (agents) agentsData = Array.isArray(agents) ? agents : [];
                    if (config) configData = config;
                    if (memory) memoryData = memory;

                    lastRefreshTime = Date.now();
                    
                    // Refresh UI
                    renderCurrentView();
                    updateCountdowns();
                    
                    console.log('âœ… Data refresh completed in', Date.now() - startTime, 'ms');
                } else {
                    console.warn('âš ï¸ API offline - using fallback data');
                    generateFallbackData();
                }
                
            } catch (error) {
                console.error('âŒ Data refresh failed:', error);
                isOnline = false;
                updateConnectionStatus();
                generateFallbackData();
            }
        }

        function updateConnectionStatus() {
            const statusEl = document.getElementById('connectionStatus');
            const dot = statusEl.querySelector('.connection-dot');
            const text = statusEl.querySelector('.connection-text');
            
            if (isOnline) {
                statusEl.classList.remove('disconnected', 'error');
                text.textContent = 'Connected';
            } else {
                statusEl.classList.add('disconnected');
                text.textContent = 'âš ï¸ Disconnected';
            }
        }

        function generateFallbackData() {
            if (agentsData.length === 0) {
                agentsData = [
                    {
                        id: 'main',
                        isDefault: true,
                        status: 'active',
                        model: 'claude-opus-4-6',
                        totalTokens: 15420,
                        lastActive: Date.now() - 120000
                    }
                ];
            }
            
            if (sessionsData.length === 0) {
                sessionsData = [
                    {
                        key: 'agent:main:executive-office',
                        kind: 'main',
                        label: 'Executive Office',
                        status: 'active',
                        model: 'claude-opus-4-6',
                        totalTokens: 8500,
                        lastActive: Date.now() - 60000
                    }
                ];
            }
            
            if (cronsData.length === 0) {
                cronsData = [
                    {
                        id: 'morning-brief',
                        name: 'Morning Brief',
                        enabled: true,
                        schedule: { expr: '0 6 * * *' },
                        state: { 
                            nextRunAtMs: getNextMorning().getTime(),
                            lastRunAtMs: Date.now() - 86400000,
                            lastStatus: 'success'
                        }
                    }
                ];
            }
        }

        function getNextMorning() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(6, 0, 0, 0);
            return tomorrow;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Enhanced Agent Management
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function getAgentData(agentId) {
            const agent = agentsData.find(a => a.id === agentId) || { id: agentId };
            const sessions = sessionsData.filter(s => s.key && s.key.includes(':' + agentId + ':'));
            const activeSessions = sessions.filter(s => s.status === 'active');
            
            // Enhanced agent data with real metrics
            return {
                ...agent,
                name: getAgentDisplayName(agentId),
                role: getAgentRole(agentId),
                status: agent.status || (activeSessions.length > 0 ? 'active' : 'idle'),
                currentTask: activeSessions.length > 0 ? activeSessions[0].label : 'Standby',
                tokensUsed: agent.totalTokens || sessions.reduce((sum, s) => sum + (s.totalTokens || 0), 0),
                sessions: sessions,
                activeSessions: activeSessions,
                isCEO: agent.isDefault || agentId === 'main',
                lastSeen: agent.lastActive ? new Date(agent.lastActive).toISOString() : null,
                lastSeenRelative: agent.lastActive ? getRelativeTime(agent.lastActive) : 'unknown'
            };
        }

        function getAgentDisplayName(agentId) {
            if (agentId === 'main') return setupConfig.userName || 'Sycopa';
            return agentId.charAt(0).toUpperCase() + agentId.slice(1);
        }

        function getAgentRole(agentId) {
            if (agentId === 'main') return 'Orchestrator';
            const roleMap = {
                atlas: 'COO',
                forge: 'CTO', 
                hunter: 'CRO',
                echo: 'CMO',
                sentinel: 'QA & Security'
            };
            return roleMap[agentId] || 'Agent';
        }

        function getAgentEmoji(agentId) {
            const emojiMap = {
                main: 'ğŸ‘‘',
                atlas: 'ğŸ“Š',
                forge: 'ğŸ”¨',
                hunter: 'ğŸ¯',
                echo: 'ğŸ“¢',
                sentinel: 'ğŸ›¡ï¸'
            };
            return emojiMap[agentId] || 'ğŸ¤–';
        }

        function getRelativeTime(timestamp) {
            const now = Date.now();
            const time = typeof timestamp === 'number' ? timestamp : new Date(timestamp).getTime();
            const diff = now - time;
            
            if (diff < 60000) return Math.round(diff / 1000) + 's ago';
            if (diff < 3600000) return Math.round(diff / 60000) + 'm ago';
            if (diff < 86400000) return Math.round(diff / 3600000) + 'h ago';
            return Math.round(diff / 86400000) + 'd ago';
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Navigation and View Management
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        var currentView = 'fleet';
        var currentSubView = 'grid'; // for fleet view

        function switchView(viewName) {
            // Update nav buttons
            document.querySelectorAll('.nav-toggle-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === viewName);
            });

            // Update view panels
            document.querySelectorAll('.view-panel').forEach(panel => {
                panel.classList.remove('active');
            });

            const targetPanel = document.getElementById(viewName + 'View');
            if (targetPanel) {
                targetPanel.classList.add('active');
                currentView = viewName;
                renderCurrentView();
            }
        }

        function switchFleetSubView(subView) {
            const gridView = document.getElementById('gridView');
            const hierarchyView = document.getElementById('hierarchyView');
            
            // Update toggle buttons
            document.querySelectorAll('.view-toggle-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.toggle === subView);
            });

            if (subView === 'hierarchy') {
                gridView.style.display = 'none';
                hierarchyView.style.display = 'flex';
                currentSubView = 'hierarchy';
            } else {
                gridView.style.display = 'grid';
                hierarchyView.style.display = 'none';
                currentSubView = 'grid';
            }
            
            renderFleetView();
        }

        function renderCurrentView() {
            switch (currentView) {
                case 'fleet':
                    renderFleetView();
                    break;
                case 'sessions':
                    renderSessionsView();
                    break;
                case 'skills':
                    renderSkillsView();
                    break;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Enhanced Fleet View Rendering
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function renderFleetView() {
            if (currentSubView === 'hierarchy') {
                renderHierarchyView();
            } else {
                renderGridView();
            }
        }

        function renderGridView() {
            const container = document.getElementById('gridView');
            const agentIds = ['main', 'atlas', 'forge', 'hunter', 'echo', 'sentinel'];
            
            let html = '';
            
            agentIds.forEach(agentId => {
                const agent = getAgentData(agentId);
                const isCEO = agent.isCEO;
                const statusClass = getStatusClass(agent.status);
                
                html += `
                    <div class="exec-room ${isCEO ? 'exec-room--ceo' : ''}" 
                         data-agent="${agentId}" 
                         role="button" 
                         tabindex="0"
                         onclick="openAgentDetail('${agentId}')"
                         aria-label="${agent.name} â€” ${agent.role}">
                        <span class="exec-room-label">${agent.role}</span>
                        <div class="agent-avatar agent-avatar--lg">
                            <svg><use href="#avatar-${agentId === 'main' ? 'ceo' : agentId}"/></svg>
                            <span class="agent-status-dot agent-status-dot--${statusClass} ${isCEO ? 'agent-status-dot--ceo' : ''}"></span>
                        </div>
                        <span class="agent-name">
                            ${isCEO ? '<span class="ceo-crown">ğŸ‘‘</span>' : ''}${agent.name}
                        </span>
                        <span class="agent-role">${agent.role}</span>
                        ${agent.currentTask !== 'Standby' ? `
                            <div style="font-size: 11px; color: var(--exec-blue); margin-top: 4px; font-weight: 500;">
                                ${agent.currentTask.length > 30 ? agent.currentTask.substring(0, 27) + '...' : agent.currentTask}
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function renderHierarchyView() {
            const container = document.getElementById('hierarchyView');
            const mainAgent = getAgentData('main');
            const cLevelAgents = ['atlas', 'forge', 'hunter', 'echo', 'sentinel'].map(id => getAgentData(id));
            
            let html = `
                <!-- CEO Node -->
                <div class="org-node">
                    <div class="org-card org-card--ceo ceo-border" data-agent="main" onclick="openAgentDetail('main')" role="button" tabindex="0">
                        <div class="agent-avatar agent-avatar--lg">
                            <svg><use href="#avatar-ceo"/></svg>
                            <span class="agent-status-dot agent-status-dot--${getStatusClass(mainAgent.status)} agent-status-dot--ceo"></span>
                        </div>
                        <div class="org-card-info">
                            <span class="agent-name"><span class="ceo-crown">ğŸ‘‘</span>${mainAgent.name}</span>
                            <span class="agent-role">${mainAgent.role}</span>
                        </div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="org-connector"></div>

                <!-- C-Level Children -->
                <div class="org-children">
            `;

            cLevelAgents.forEach(agent => {
                const statusClass = getStatusClass(agent.status);
                html += `
                    <div class="org-child">
                        <div class="org-connector--branch"></div>
                        <div class="org-card" data-agent="${agent.id}" onclick="openAgentDetail('${agent.id}')" role="button" tabindex="0">
                            <div class="agent-avatar">
                                <svg><use href="#avatar-${agent.id}"/></svg>
                                <span class="agent-status-dot agent-status-dot--${statusClass}"></span>
                            </div>
                            <div class="org-card-info">
                                <span class="agent-name">${agent.name}</span>
                                <span class="agent-role">${agent.role}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        function getStatusClass(status) {
            const statusMap = {
                'active': 'active',
                'busy': 'busy',
                'working': 'active',
                'idle': 'idle',
                'offline': 'idle',
                'error': 'error'
            };
            return statusMap[status] || 'idle';
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Enhanced Sessions View with Cron Countdown Timers
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function renderSessionsView() {
            const container = document.getElementById('sessionsList');
            
            let html = '';
            
            // Active Sessions
            const activeSessions = sessionsData.filter(s => s.status === 'active');
            if (activeSessions.length > 0) {
                html += '<h3 style="margin-bottom: 16px; color: var(--text-primary);">Active Sessions</h3>';
                activeSessions.forEach(session => {
                    html += renderSessionCard(session);
                });
            }

            // Cron Jobs with Countdown Timers
            if (cronsData.length > 0) {
                html += '<h3 style="margin: 32px 0 16px; color: var(--text-primary);">Scheduled Jobs</h3>';
                cronsData.forEach(cron => {
                    html += renderCronCard(cron);
                });
            }

            if (activeSessions.length === 0 && cronsData.length === 0) {
                html = '<div style="text-align: center; padding: 60px 20px; color: var(--text-tertiary);">No active sessions or cron jobs</div>';
            }

            container.innerHTML = html;
        }

        function renderSessionCard(session) {
            const emoji = getSessionEmoji(session.label || session.key);
            const modelDisplay = getModelDisplay(session.model);
            
            return `
                <div class="session-card" onclick="openSessionDetail('${session.key}')">
                    <div class="session-header">
                        <div class="session-emoji">${emoji}</div>
                        <div class="session-info">
                            <div class="session-name">${session.label || session.key}</div>
                            <div class="session-schedule">${modelDisplay} â€¢ ${session.totalTokens || 0} tokens</div>
                        </div>
                        <div class="session-status session-status--active">Active</div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        Last active: ${session.lastActive ? getRelativeTime(session.lastActive) : 'unknown'}
                    </div>
                </div>
            `;
        }

        function renderCronCard(cron) {
            const emoji = getCronEmoji(cron.name);
            const nextRun = cron.state?.nextRunAtMs;
            const countdown = nextRun ? getCountdownString(nextRun) : null;
            
            return `
                <div class="session-card cron-tile" onclick="toggleCronDetails('${cron.id}')" data-cron-id="${cron.id}">
                    <div class="session-header">
                        <div class="session-emoji">${emoji}</div>
                        <div class="session-info">
                            <div class="session-name">${cron.name}</div>
                            <div class="session-schedule">${formatCronSchedule(cron.schedule?.expr || '')}</div>
                            ${countdown ? `<div class="cron-countdown" id="countdown-${cron.id}">Next in ${countdown}</div>` : ''}
                        </div>
                        <div class="session-status ${cron.enabled ? 'session-status--active' : 'session-status--disabled'}">
                            ${cron.enabled ? 'Enabled' : 'Disabled'}
                        </div>
                    </div>
                    <div class="cron-details" id="details-${cron.id}" style="display: none;">
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            <div><strong>Schedule:</strong> ${cron.schedule?.expr || 'N/A'}</div>
                            ${cron.state?.lastRunAtMs ? `<div><strong>Last run:</strong> ${getRelativeTime(cron.state.lastRunAtMs)}</div>` : ''}
                            ${cron.state?.lastStatus ? `<div><strong>Last status:</strong> ${cron.state.lastStatus}</div>` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        function getSessionEmoji(label) {
            const lowerLabel = (label || '').toLowerCase();
            if (lowerLabel.includes('office') || lowerLabel.includes('executive')) return 'ğŸ¢';
            if (lowerLabel.includes('chat') || lowerLabel.includes('message')) return 'ğŸ’¬';
            if (lowerLabel.includes('build') || lowerLabel.includes('code')) return 'ğŸ”¨';
            if (lowerLabel.includes('data') || lowerLabel.includes('analysis')) return 'ğŸ“Š';
            return 'âš™ï¸';
        }

        function getCronEmoji(name) {
            const lowerName = (name || '').toLowerCase();
            if (lowerName.includes('morning') || lowerName.includes('brief')) return 'â˜€ï¸';
            if (lowerName.includes('backup') || lowerName.includes('git')) return 'ğŸ’¾';
            if (lowerName.includes('standup') || lowerName.includes('meeting')) return 'ğŸ¤';
            if (lowerName.includes('deploy') || lowerName.includes('release')) return 'ğŸš€';
            if (lowerName.includes('audit') || lowerName.includes('security')) return 'ğŸ›¡ï¸';
            if (lowerName.includes('report') || lowerName.includes('metrics')) return 'ğŸ“Š';
            return 'â°';
        }

        function getModelDisplay(model) {
            if (!model) return 'Unknown Model';
            if (model.includes('opus-4-6') || model.includes('opus-4.6')) return 'Claude Opus 4.6';
            if (model.includes('sonnet-4')) return 'Claude Sonnet 4';
            if (model.includes('haiku-4.5')) return 'Claude Haiku 4.5';
            if (model.includes('opus')) return 'Claude Opus';
            if (model.includes('sonnet')) return 'Claude Sonnet';
            if (model.includes('haiku')) return 'Claude Haiku';
            return model;
        }

        function formatCronSchedule(cronExpr) {
            if (!cronExpr) return 'Manual';
            if (cronExpr === '0 6 * * *') return 'Daily at 6:00 AM';
            if (cronExpr === '0 8 * * 1-5') return 'Weekdays at 8:00 AM';
            if (cronExpr === '0 */6 * * *') return 'Every 6 hours';
            if (cronExpr === '*/30 * * * *') return 'Every 30 minutes';
            return cronExpr;
        }

        function getCountdownString(targetMs) {
            const now = Date.now();
            const diff = targetMs - now;
            
            if (diff <= 0) return 'Now';
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            if (days > 0) return `${days}d ${hours}h`;
            if (hours > 0) return `${hours}h ${minutes}m`;
            if (minutes > 0) return `${minutes}m ${seconds}s`;
            return `${seconds}s`;
        }

        function updateCountdowns() {
            cronsData.forEach(cron => {
                const countdownEl = document.getElementById(`countdown-${cron.id}`);
                if (countdownEl && cron.state?.nextRunAtMs) {
                    const countdown = getCountdownString(cron.state.nextRunAtMs);
                    countdownEl.textContent = `Next in ${countdown}`;
                }
            });
        }

        function toggleCronDetails(cronId) {
            const detailsEl = document.getElementById(`details-${cronId}`);
            const cardEl = document.querySelector(`[data-cron-id="${cronId}"]`);
            
            if (detailsEl && cardEl) {
                const isExpanded = detailsEl.style.display !== 'none';
                detailsEl.style.display = isExpanded ? 'none' : 'block';
                cardEl.classList.toggle('expanded', !isExpanded);
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Skills Center View
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function renderSkillsView() {
            const container = document.getElementById('skillCategories');
            
            const skillCategories = [
                {
                    name: 'AI',
                    icon: 'ğŸ§ ',
                    skills: ['Natural Language Processing', 'Image Analysis', 'Code Generation', 'Data Analysis']
                },
                {
                    name: 'Development',
                    icon: 'ğŸ› ï¸',
                    skills: ['Web Development', 'API Integration', 'Database Management', 'DevOps']
                },
                {
                    name: 'Communication',
                    icon: 'ğŸ’¬',
                    skills: ['Email Management', 'Slack Integration', 'Telegram Bots', 'Content Writing']
                },
                {
                    name: 'Data',
                    icon: 'ğŸ“Š',
                    skills: ['Analytics', 'Reporting', 'Visualization', 'ETL Processes']
                },
                {
                    name: 'Automation',
                    icon: 'âš™ï¸',
                    skills: ['Workflow Automation', 'Scheduled Tasks', 'Process Optimization', 'Integration']
                }
            ];

            let html = '';
            
            skillCategories.forEach(category => {
                html += `
                    <div class="skill-category">
                        <div class="skill-category-header">
                            <div class="skill-category-icon">${category.icon}</div>
                            <div class="skill-category-name">${category.name}</div>
                        </div>
                        <div class="skill-list">
                `;
                
                category.skills.forEach(skill => {
                    html += `
                        <div class="skill-item">
                            <div class="skill-name">${skill}</div>
                            <button class="skill-add-btn" onclick="addSkillToAgent('${skill}')">Add</button>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function addSkillToAgent(skillName) {
            // For now, just show a toast. In the future, this could open an agent selection modal
            showToast(`âœ… Skill "${skillName}" added to your skill library`);
            
            // Store skill in localStorage for persistence
            let userSkills = [];
            try {
                userSkills = JSON.parse(localStorage.getItem('user-skills') || '[]');
            } catch (e) {}
            
            if (!userSkills.includes(skillName)) {
                userSkills.push(skillName);
                localStorage.setItem('user-skills', JSON.stringify(userSkills));
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Enhanced Agent Detail Panel
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function openAgentDetail(agentId) {
            const agent = getAgentData(agentId);
            const overlay = document.getElementById('detailOverlay');
            
            // Update hero section
            document.getElementById('detailAvatarIcon').setAttribute('href', `#avatar-${agentId === 'main' ? 'ceo' : agentId}`);
            document.getElementById('detailHeroStatus').className = `detail-hero-status agent-status-dot--${getStatusClass(agent.status)} ${agent.isCEO ? 'agent-status-dot--ceo' : ''}`;
            
            const nameEl = document.getElementById('detailHeroName');
            nameEl.innerHTML = agent.isCEO ? `<span class="ceo-crown">ğŸ‘‘</span>${agent.name}` : agent.name;
            
            document.getElementById('detailHeroRole').textContent = agent.role;
            document.getElementById('detailHeroTask').textContent = agent.currentTask;

            // Build detail body content
            const bodyEl = document.getElementById('detailBody');
            let html = '';

            // Metrics Section
            html += `
                <div class="detail-section">
                    <div class="detail-section-title">Metrics</div>
                    <div class="detail-metrics">
                        <div class="detail-metric">
                            <div class="detail-metric-value">${formatNumber(agent.tokensUsed)}</div>
                            <div class="detail-metric-label">Tokens Used</div>
                        </div>
                        <div class="detail-metric">
                            <div class="detail-metric-value">${agent.activeSessions.length}</div>
                            <div class="detail-metric-label">Active Sessions</div>
                        </div>
                        <div class="detail-metric">
                            <div class="detail-metric-value">${agent.lastSeenRelative}</div>
                            <div class="detail-metric-label">Last Active</div>
                        </div>
                        <div class="detail-metric">
                            <div class="detail-metric-value">${getModelDisplay(agent.model)}</div>
                            <div class="detail-metric-label">AI Model</div>
                        </div>
                    </div>
                </div>
            `;

            // Current Task Section
            if (agent.currentTask && agent.currentTask !== 'Standby') {
                html += `
                    <div class="detail-section">
                        <div class="detail-section-title">Current Task</div>
                        <div style="font-size: 13px; color: var(--text-primary); line-height: 1.4;">
                            ${agent.currentTask}
                        </div>
                        ${agent.activeSessions.length > 0 ? `
                            <div style="margin-top: 8px; font-size: 12px; color: var(--text-secondary);">
                                Session: ${agent.activeSessions[0].key}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            // Sessions Section
            if (agent.sessions.length > 0) {
                html += `
                    <div class="detail-section">
                        <div class="detail-section-title">Sessions (${agent.sessions.length})</div>
                `;
                
                agent.sessions.slice(0, 5).forEach(session => {
                    const isActive = session.status === 'active';
                    html += `
                        <div style="display: flex; align-items: center; gap: 8px; padding: 8px 0; border-bottom: 1px solid var(--border-subtle);">
                            <div style="width: 6px; height: 6px; border-radius: 50%; background: ${isActive ? 'var(--status-active)' : 'var(--status-idle)'};"></div>
                            <div style="flex: 1; font-size: 12px; color: var(--text-primary);">${session.label || session.key}</div>
                            <div style="font-size: 11px; color: var(--text-tertiary);">${session.totalTokens || 0} tokens</div>
                        </div>
                    `;
                });
                
                html += '</div>';
            }

            // Skills Section
            const userSkills = getUserSkills();
            if (userSkills.length > 0) {
                html += `
                    <div class="detail-section">
                        <div class="detail-section-title">Skills</div>
                        <div class="detail-skill-chips">
                `;
                
                userSkills.forEach(skill => {
                    html += `<span class="detail-skill-chip">${skill}</span>`;
                });
                
                html += `
                        </div>
                        <button onclick="openSkillsManager('${agentId}')" style="margin-top: 12px; padding: 8px 16px; background: var(--exec-blue); color: white; border: none; border-radius: 8px; font-size: 12px; cursor: pointer;">
                            Manage Skills
                        </button>
                    </div>
                `;
            }

            // CEO Special Sections
            if (agent.isCEO) {
                // Mission Overview
                html += `
                    <div class="detail-section">
                        <div class="detail-section-title">Missions Overview</div>
                        <div class="missions-overview">
                `;
                
                const activeSessions = sessionsData.filter(s => s.status === 'active' && s.label);
                if (activeSessions.length > 0) {
                    activeSessions.slice(0, 3).forEach(session => {
                        html += `
                            <div class="mission-card" onclick="openSessionDetail('${session.key}')">
                                <div class="mission-header">
                                    <div class="mission-name">${session.label}</div>
                                    <div class="mission-priority mission-priority--medium">Active</div>
                                </div>
                                <div class="mission-agents">
                                    <div class="mission-agent-chip">main</div>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    html += '<div style="color: var(--text-tertiary); font-size: 12px;">No active missions</div>';
                }
                
                html += '</div></div>';

                // Remove decommission button for CEO (Feature #2)
            } else {
                // Decommission button for non-CEO agents (but make it non-functional for now)
                html += `
                    <div class="detail-section">
                        <button onclick="decommissionAgent('${agentId}')" style="width: 100%; padding: 12px; background: var(--status-error); color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            Decommission Agent
                        </button>
                    </div>
                `;
            }

            bodyEl.innerHTML = html;
            overlay.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeAgentDetail() {
            const overlay = document.getElementById('detailOverlay');
            overlay.classList.remove('open');
            document.body.style.overflow = '';
        }

        function formatNumber(num) {
            if (!num) return '0';
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        function getUserSkills() {
            try {
                return JSON.parse(localStorage.getItem('user-skills') || '[]');
            } catch (e) {
                return [];
            }
        }

        function decommissionAgent(agentId) {
            showToast(`âš ï¸ Agent decommissioning not available in demo mode`);
        }

        function openSkillsManager(agentId) {
            switchView('skills');
            closeAgentDetail();
        }

        function openSessionDetail(sessionKey) {
            showToast(`ğŸ“‹ Session details: ${sessionKey}`);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Enhanced Add Agent Wizard
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        var wizardState = { step: 1, name: '', emoji: 'ğŸ¤–', role: '', model: '' };
        
        var AGENT_ROLES = [
            { id: 'taskrunner', name: 'TaskRunner', desc: 'Executes tasks and workflows', emoji: 'âš¡' },
            { id: 'codebuilder', name: 'CodeBuilder', desc: 'Writes and reviews code', emoji: 'ğŸ› ï¸' },
            { id: 'researcher', name: 'Researcher', desc: 'Gathers and analyzes information', emoji: 'ğŸ”' },
            { id: 'analyst', name: 'Analyst', desc: 'Data analysis and reporting', emoji: 'ğŸ“Š' },
            { id: 'writer', name: 'Writer', desc: 'Content creation and copywriting', emoji: 'âœï¸' },
            { id: 'designer', name: 'Designer', desc: 'UI/UX and visual design', emoji: 'ğŸ¨' },
            { id: 'security', name: 'Security', desc: 'Auditing and vulnerability scanning', emoji: 'ğŸ›¡ï¸' },
            { id: 'ops', name: 'Operations', desc: 'DevOps and infrastructure', emoji: 'âš™ï¸' }
        ];
        
        var AGENT_MODELS = [
            { id: 'claude-opus-4-6', name: 'Claude Opus 4.6', tier: 'Premium' },
            { id: 'claude-sonnet-4', name: 'Claude Sonnet 4', tier: 'Recommended' },
            { id: 'claude-haiku-4-5', name: 'Claude Haiku 4.5', tier: 'Fast' },
            { id: 'gpt-4o', name: 'GPT-4o', tier: 'Standard' },
            { id: 'gpt-4o-mini', name: 'GPT-4o Mini', tier: 'Budget' }
        ];

        function openAddAgentWizard() {
            wizardState = { step: 1, name: '', emoji: 'ğŸ¤–', role: '', model: '' };
            const overlay = document.getElementById('addAgentOverlay');
            overlay.classList.add('open');
            document.body.style.overflow = 'hidden';
            renderWizardStep();
        }

        function closeAddAgentWizard() {
            const overlay = document.getElementById('addAgentOverlay');
            overlay.classList.remove('open');
            document.body.style.overflow = '';
        }

        function renderWizardStep() {
            const body = document.getElementById('addAgentBody');
            if (!body) return;
            
            let html = '';
            
            // Progress bar
            html += '<div class="wizard-progress">';
            for (let i = 1; i <= 3; i++) {
                const classes = ['wizard-step'];
                if (i < wizardState.step) classes.push('completed');
                if (i === wizardState.step) classes.push('active');
                html += `<div class="${classes.join(' ')}"></div>`;
            }
            html += '</div>';
            
            if (wizardState.step === 1) {
                html += `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h3>Name & Identity</h3>
                        <p style="color: var(--text-secondary); font-size: 14px;">Give your agent a name and emoji</p>
                    </div>
                    <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                        <input id="wizardEmoji" type="text" value="${wizardState.emoji}" maxlength="2" 
                               style="width: 60px; height: 48px; text-align: center; font-size: 24px; border: 1px solid var(--border-medium); border-radius: 12px; background: var(--bg-tertiary);" />
                        <input id="wizardName" type="text" placeholder="Agent name" value="${wizardState.name}" 
                               class="wizard-input" style="flex: 1;" />
                    </div>
                    <div class="wizard-actions">
                        <button id="wizardNext1" class="wizard-btn wizard-btn--primary">Continue</button>
                    </div>
                `;
            } else if (wizardState.step === 2) {
                html += `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h3>Select Role</h3>
                        <p style="color: var(--text-secondary); font-size: 14px;">What will ${wizardState.emoji} ${wizardState.name} do?</p>
                    </div>
                    <div class="wizard-role-grid">
                `;
                
                AGENT_ROLES.forEach(role => {
                    const selected = wizardState.role === role.id;
                    html += `
                        <button class="wizard-role-btn ${selected ? 'selected' : ''}" data-role="${role.id}">
                            <div class="wizard-role-emoji">${role.emoji}</div>
                            <div class="wizard-role-info">
                                <div class="wizard-role-name">${role.name}</div>
                                <div class="wizard-role-desc">${role.desc}</div>
                            </div>
                        </button>
                    `;
                });
                
                html += `
                    </div>
                    <div class="wizard-actions">
                        <button id="wizardBack2" class="wizard-btn wizard-btn--secondary">Back</button>
                        <button id="wizardNext2" class="wizard-btn wizard-btn--primary" ${!wizardState.role ? 'disabled' : ''}>Continue</button>
                    </div>
                `;
            } else if (wizardState.step === 3) {
                html += `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h3>Choose Model</h3>
                        <p style="color: var(--text-secondary); font-size: 14px;">Select AI model for ${wizardState.emoji} ${wizardState.name}</p>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px;">
                `;
                
                AGENT_MODELS.forEach(model => {
                    const selected = wizardState.model === model.id;
                    html += `
                        <button class="wizard-role-btn ${selected ? 'selected' : ''}" data-model="${model.id}" style="justify-content: space-between;">
                            <div class="wizard-role-name">${model.name}</div>
                            <div style="padding: 2px 8px; background: var(--bg-tertiary); border-radius: 4px; font-size: 10px;">${model.tier}</div>
                        </button>
                    `;
                });
                
                html += `
                    </div>
                    <div class="wizard-actions">
                        <button id="wizardBack3" class="wizard-btn wizard-btn--secondary">Back</button>
                        <button id="wizardCreate" class="wizard-btn wizard-btn--primary" ${!wizardState.model ? 'disabled' : ''}>âœ¨ Create Agent</button>
                    </div>
                `;
            }
            
            body.innerHTML = html;
            attachWizardListeners();
        }

        function attachWizardListeners() {
            // Step 1 listeners
            const next1 = document.getElementById('wizardNext1');
            if (next1) {
                next1.addEventListener('click', () => {
                    const nameInput = document.getElementById('wizardName');
                    const emojiInput = document.getElementById('wizardEmoji');
                    wizardState.name = nameInput.value.trim();
                    wizardState.emoji = emojiInput.value.trim() || 'ğŸ¤–';
                    if (wizardState.name) {
                        wizardState.step = 2;
                        renderWizardStep();
                    }
                });
            }

            // Step 2 listeners
            document.querySelectorAll('[data-role]').forEach(btn => {
                btn.addEventListener('click', () => {
                    wizardState.role = btn.dataset.role;
                    renderWizardStep();
                    // Fix scroll bug: ensure the selected role stays visible
                    setTimeout(() => {
                        btn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                });
            });

            const back2 = document.getElementById('wizardBack2');
            if (back2) {
                back2.addEventListener('click', () => {
                    wizardState.step = 1;
                    renderWizardStep();
                });
            }

            const next2 = document.getElementById('wizardNext2');
            if (next2 && wizardState.role) {
                next2.addEventListener('click', () => {
                    wizardState.step = 3;
                    renderWizardStep();
                });
            }

            // Step 3 listeners
            document.querySelectorAll('[data-model]').forEach(btn => {
                btn.addEventListener('click', () => {
                    wizardState.model = btn.dataset.model;
                    renderWizardStep();
                });
            });

            const back3 = document.getElementById('wizardBack3');
            if (back3) {
                back3.addEventListener('click', () => {
                    wizardState.step = 2;
                    renderWizardStep();
                });
            }

            const create = document.getElementById('wizardCreate');
            if (create && wizardState.model) {
                create.addEventListener('click', createAgent);
            }
        }

        function createAgent() {
            // In a real implementation, this would call the API to create the agent
            showToast(`âœ… Agent "${wizardState.name}" created successfully!`);
            closeAddAgentWizard();
            
            // For demo purposes, we could add the agent to our local data
            // and refresh the view, but since we're working with real API data,
            // we'll just show the success message
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Toast Notifications
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function showToast(message) {
            const container = document.getElementById('toastContainer');
            if (!container) return;
            
            const toast = document.createElement('div');
            toast.className = 'exec-toast';
            toast.textContent = message;
            
            container.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) toast.parentNode.removeChild(toast);
                }, 300);
            }, 3000);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Event Listeners and Initialization
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function attachEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => switchView(btn.dataset.view));
            });

            // Fleet view toggles
            document.querySelectorAll('.view-toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => switchFleetSubView(btn.dataset.toggle));
            });

            // Detail panel close
            document.getElementById('detailClose').addEventListener('click', closeAgentDetail);
            document.querySelector('.detail-backdrop').addEventListener('click', closeAgentDetail);

            // Wizard close
            document.getElementById('wizardClose').addEventListener('click', closeAddAgentWizard);
            document.querySelector('.wizard-backdrop').addEventListener('click', closeAddAgentWizard);

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeAgentDetail();
                    closeAddAgentWizard();
                }
                
                // Quick navigation
                if (e.ctrlKey || e.metaKey) {
                    switch (e.key) {
                        case '1':
                            e.preventDefault();
                            switchView('fleet');
                            break;
                        case '2':
                            e.preventDefault();
                            switchView('sessions');
                            break;
                        case '3':
                            e.preventDefault();
                            switchView('skills');
                            break;
                    }
                }
            });
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Initialization and Auto-Refresh
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        function initialize() {
            console.log('ğŸš€ SpawnKit Executive Office Enhanced - Initializing...');
            
            attachEventListeners();
            
            // Initial data fetch
            refreshAllData().then(() => {
                renderCurrentView();
                
                // Set up auto-refresh
                setInterval(() => {
                    refreshAllData();
                }, REFRESH_INTERVAL);
                
                // Set up countdown updates every second
                setInterval(updateCountdowns, 1000);
                
                console.log('âœ… SpawnKit Executive Office Enhanced - Ready!');
            });
        }

        // Global functions for HTML onclick handlers
        window.openAgentDetail = openAgentDetail;
        window.closeAgentDetail = closeAgentDetail;
        window.openAddAgentWizard = openAddAgentWizard;
        window.closeAddAgentWizard = closeAddAgentWizard;
        window.switchView = switchView;
        window.toggleCronDetails = toggleCronDetails;
        window.addSkillToAgent = addSkillToAgent;
        window.openSkillsManager = openSkillsManager;
        window.openSessionDetail = openSessionDetail;
        window.decommissionAgent = decommissionAgent;

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }

    })();
    </script>
</body>
</html>