<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Identity System Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 2rem;
            background: #f5f5f7;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .agent-card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--model-color, #ccc);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .agent-info {
            flex: 1;
        }
        
        .agent-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: #1d1d1f;
        }
        
        .agent-role {
            color: #666;
            font-size: 0.9rem;
        }
        
        .model-badge {
            background: var(--model-color, #ccc);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .model-badge::before {
            content: var(--model-symbol, '?');
            margin-right: 0.25rem;
        }
        
        .model-badge::after {
            content: ' ' var(--model-level, '???');
        }
        
        .theme-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .theme-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #1d1d1f;
        }
        
        .test-controls {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.25rem;
        }
        
        .btn:hover {
            background: #0066D6;
        }
        
        .model-tier-premium .agent-card {
            box-shadow: 0 4px 16px rgba(255, 107, 107, 0.2);
        }
        
        .model-tier-standard .agent-card {
            box-shadow: 0 2px 12px rgba(78, 205, 196, 0.15);
        }
        
        .model-tier-light .agent-card {
            box-shadow: 0 1px 8px rgba(69, 183, 209, 0.15);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ Model Identity System</h1>
        <p>Visual distinction for AI models across SpawnKit themes.</p>
        
        <div class="test-controls">
            <h2>Test Controls</h2>
            <button class="btn" onclick="registerCustomModel()">Register GPT-4 Turbo</button>
            <button class="btn" onclick="showAllIdentities()">Show All Models</button>
            <button class="btn" onclick="testThemeFormats()">Test Theme Formats</button>
        </div>
        
        <div class="theme-section">
            <div class="theme-title">Demo Agents with Model Identity</div>
            <div id="agent-list"></div>
        </div>
        
        <div class="theme-section">
            <div class="theme-title">Theme Format Examples</div>
            <div id="theme-examples"></div>
        </div>
        
        <div class="theme-section">
            <div class="theme-title">Registry Status</div>
            <pre id="registry-info"></pre>
        </div>
    </div>

    <!-- Load dependencies -->
    <script src="src/model-identity.js"></script>
    <script src="src/data-bridge.js"></script>
    <script src="src/theme-names.js"></script>

    <script>
        // Test data
        const testAgents = [
            { id: 'kira', name: 'ApoMac', role: 'CEO', model: 'claude-opus-4-6', emoji: 'ðŸ‘‘' },
            { id: 'forge', name: 'Forge', role: 'CTO', model: 'claude-opus-4-6', emoji: 'ðŸ”¨' },
            { id: 'hunter', name: 'Hunter', role: 'CRO', model: 'claude-sonnet-4', emoji: 'ðŸ’°' },
            { id: 'echo', name: 'Echo', role: 'CMO', model: 'claude-haiku-4-5', emoji: 'ðŸ“¢' },
            { id: 'atlas', name: 'Atlas', role: 'COO', model: 'claude-sonnet-4', emoji: 'ðŸ“Š' },
            { id: 'sentinel', name: 'Sentinel', role: 'Auditor', model: 'claude-haiku-4-5', emoji: 'ðŸ›¡ï¸' }
        ];

        function renderAgents() {
            const agentList = document.getElementById('agent-list');
            agentList.innerHTML = '';
            
            testAgents.forEach(agent => {
                const card = document.createElement('div');
                card.className = 'agent-card';
                
                // Apply model identity styling
                ModelIdentity.applyToElement(card, agent.model);
                
                const identity = ModelIdentity.getIdentity(agent.model);
                
                card.innerHTML = `
                    <div>${agent.emoji}</div>
                    <div class="agent-info">
                        <div class="agent-name">${agent.name}</div>
                        <div class="agent-role">${agent.role}</div>
                    </div>
                    <div class="model-badge"></div>
                `;
                
                agentList.appendChild(card);
            });
        }

        function registerCustomModel() {
            ModelIdentity.register('gpt-4-turbo', {
                tier: 'standard',
                color: '#10A37F',
                symbol: 'âš¡',
                level: 'TURBO',
                name: 'GPT-4'
            });
            
            // Add a test agent with the new model
            testAgents.push({
                id: 'gpt-agent',
                name: 'GPT Agent',
                role: 'Assistant',
                model: 'gpt-4-turbo',
                emoji: 'ðŸ¤–'
            });
            
            renderAgents();
            updateRegistryInfo();
        }

        function showAllIdentities() {
            const models = ModelIdentity.getRegisteredModels();
            console.log('Registered Models:', models);
            models.forEach(modelId => {
                const identity = ModelIdentity.getIdentity(modelId);
                console.log(`${modelId}:`, identity);
            });
        }

        function testThemeFormats() {
            const themes = ['executive', 'gameboy', 'sims'];
            const examples = document.getElementById('theme-examples');
            examples.innerHTML = '';
            
            themes.forEach(theme => {
                const section = document.createElement('div');
                section.innerHTML = `<h3>${theme.toUpperCase()} Theme</h3>`;
                
                testAgents.slice(0, 3).forEach(agent => {
                    const formatted = ModelIdentity.formatDisplayName(theme, agent.name, agent.model);
                    const themeSpecific = SpawnKitNames.resolveWithModel(theme, agent.id, agent.model);
                    
                    const item = document.createElement('div');
                    item.style.margin = '0.5rem 0';
                    item.innerHTML = `
                        <strong>Model Display:</strong> ${formatted}<br>
                        <strong>Theme Names:</strong> ${themeSpecific}
                    `;
                    section.appendChild(item);
                });
                
                examples.appendChild(section);
            });
        }

        function updateRegistryInfo() {
            const info = document.getElementById('registry-info');
            const models = ModelIdentity.getRegisteredModels();
            const registry = {};
            
            models.forEach(modelId => {
                registry[modelId] = ModelIdentity.getIdentity(modelId);
            });
            
            info.textContent = JSON.stringify(registry, null, 2);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderAgents();
            updateRegistryInfo();
            
            console.log('ðŸŽ¨ Model Identity System loaded');
            console.log('Available models:', ModelIdentity.getRegisteredModels());
        });
    </script>
</body>
</html>